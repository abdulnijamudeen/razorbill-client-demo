(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+YfB":function(t,r,e){"use strict";e.r(r),e.d(r,"ProductModule",function(){return at});var o=e("d2mR"),i=e("SVse"),n=e("s7LF"),s=e("V2nQ"),c=e("PSD3"),a=e.n(c),b=e("8Y7J"),l=e("iInd"),d=e("EApP"),u=e("JqCM"),p=e("AytR"),m=e("IheW");let h=(()=>{class t{constructor(t){this.http=t}getAllVarients(t=0,r=2,e="",o){const i={page:String(t),pageSize:String(r),search:e,productId:String(o)};return this.http.get(p.a.apiUrl+"/client/varients",{params:i})}deleteVarient(t){return this.http.delete(`${p.a.apiUrl}/client/varients/${t}`)}getVarient(t){return this.http.get(`${p.a.apiUrl}/client/varients/${t}`)}saveVarient(t){return this.http.post(p.a.apiUrl+"/client/varients",t)}updateVarient(t,r){return this.http.put(`${p.a.apiUrl}/client/varients/${t}`,r)}getSpecificationByVarientId(t){return this.http.get(`${p.a.apiUrl}/client/varients/${t}/specifications`)}saveSpecification(t,r){return this.http.post(`${p.a.apiUrl}/client/varients/${t}/specifications`,r)}}return t.\u0275fac=function(r){return new(r||t)(b.Rb(m.b))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),f=(()=>{class t{constructor(t){this.http=t}getAllProducts(t=0,r=2,e=""){const o={page:String(t),pageSize:String(r),search:e};return this.http.get(p.a.apiUrl+"/client/products",{params:o})}deleteProduct(t){return this.http.delete(`${p.a.apiUrl}/client/products/${t}`)}getProduct(t){return this.http.get(`${p.a.apiUrl}/client/products/${t}`)}saveProduct(t){return this.http.post(p.a.apiUrl+"/client/products",t)}updateProduct(t,r){return this.http.put(`${p.a.apiUrl}/client/products/${t}`,r)}}return t.\u0275fac=function(r){return new(r||t)(b.Rb(m.b))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function g(t,r){if(1&t&&(b.Nb(0,"li",19),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function v(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,g,2,1,"li",34),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}function M(t,r){1&t&&(b.Nb(0,"li",19),b.uc(1," Price is required "),b.Mb())}function N(t,r){if(1&t&&(b.Nb(0,"li",19),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Price should be minimum ",null==t.formControls.price.errors?null:t.formControls.price.errors.min.min,". ")}}function w(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,M,2,0,"li",34),b.sc(2,N,2,1,"li",34),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.price.errors?null:t.formControls.price.errors.required),b.wb(1),b.bc("ngIf",null==t.formControls.price.errors?null:t.formControls.price.errors.min)}}function C(t,r){1&t&&(b.Nb(0,"li",19),b.uc(1," MRP is required "),b.Mb())}function I(t,r){if(1&t&&(b.Nb(0,"li",19),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" MRP should be minimum ",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.min.min,". ")}}function S(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,C,2,0,"li",34),b.sc(2,I,2,1,"li",34),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.required),b.wb(1),b.bc("ngIf",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.min)}}function P(t,r){if(1&t&&(b.Nb(0,"li",19),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Color should be maximum ",null==t.formControls.color.errors?null:t.formControls.color.errors.maxlength.requiredLength," characters. ")}}function y(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,P,2,1,"li",34),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.color.errors?null:t.formControls.color.errors.maxlength)}}function x(t,r){if(1&t&&(b.Nb(0,"li",19),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Size should be maximum ",null==t.formControls.size.errors?null:t.formControls.size.errors.maxlength.requiredLength," characters. ")}}function k(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,x,2,1,"li",34),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.size.errors?null:t.formControls.size.errors.maxlength)}}function V(t,r){1&t&&(b.Nb(0,"div",0),b.Nb(1,"div",42),b.Nb(2,"h6",19),b.uc(3,"No specification added yet "),b.Mb(),b.Mb(),b.Mb())}function F(t,r){1&t&&(b.Nb(0,"div",0),b.Nb(1,"div",17),b.Nb(2,"label"),b.uc(3,"Title "),b.Nb(4,"span",19),b.uc(5,"*"),b.Mb(),b.Mb(),b.Mb(),b.Nb(6,"div",17),b.Nb(7,"label"),b.uc(8,"Specification "),b.Nb(9,"span",19),b.uc(10,"*"),b.Mb(),b.Mb(),b.Mb(),b.Ib(11,"div",43),b.Mb())}const E=function(){return{standalone:!0}};function O(t,r){if(1&t){const t=b.Ob();b.Nb(0,"div",16),b.Nb(1,"div",44),b.Nb(2,"input",45),b.Ub("ngModelChange",function(t){return r.$implicit.name=t}),b.Mb(),b.Mb(),b.Nb(3,"div",46),b.Nb(4,"input",47),b.Ub("ngModelChange",function(t){return r.$implicit.value=t}),b.Mb(),b.Mb(),b.Nb(5,"div",48),b.Nb(6,"i",49),b.Ub("click",function(){b.kc(t);const e=r.index;return b.Wb(2).specifications.splice(e,1)}),b.Mb(),b.Mb(),b.Mb()}if(2&t){const t=r.$implicit;b.wb(2),b.bc("ngModel",t.name)("ngModelOptions",b.cc(4,E)),b.wb(2),b.bc("ngModel",t.value)("ngModelOptions",b.cc(5,E))}}function A(t,r){if(1&t){const t=b.Ob();b.Nb(0,"div",0),b.Nb(1,"div",1),b.Nb(2,"div",2),b.Nb(3,"div",3),b.Nb(4,"h4",4),b.uc(5," Varient form "),b.Ib(6,"i",5),b.uc(7),b.Ib(8,"i",5),b.uc(9),b.Ib(10,"i",5),b.uc(11," Specifications "),b.Mb(),b.Nb(12,"p",6),b.uc(13," Add / Edit Specifications "),b.Mb(),b.Nb(14,"div",35),b.Nb(15,"div",7),b.Nb(16,"button",8),b.Ib(17,"i",9),b.uc(18," Back "),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"form",36),b.Ub("ngSubmit",function(){return b.kc(t),b.Wb().onSpecificationSave()}),b.sc(20,V,4,0,"div",33),b.sc(21,F,12,0,"div",33),b.sc(22,O,7,6,"div",37),b.Nb(23,"div",38),b.Nb(24,"div",7),b.Nb(25,"button",39),b.Ub("click",function(){return b.kc(t),b.Wb().specifications.push({id:0,name:"",value:""})}),b.Ib(26,"i",40),b.uc(27," New "),b.Mb(),b.Mb(),b.Mb(),b.Nb(28,"button",41),b.uc(29,"Save"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()}if(2&t){const t=b.Wb();b.wb(7),b.wc(" ",null==t.product||null==t.product.category?null:t.product.category.name," "),b.wb(2),b.wc(" ",null==t.product?null:t.product.name," "),b.wb(11),b.bc("ngIf",0===t.specifications.length),b.wb(1),b.bc("ngIf",t.specifications.length>0),b.wb(1),b.bc("ngForOf",t.specifications)}}const U=function(t){return{"is-invalid":t}};let q=(()=>{class t{constructor(t,r,e,o,i,c,a){var b;this.router=t,this.route=r,this.fb=e,this.toastr=o,this.spinner=i,this.varientService=c,this.productService=a,this.formMode=s.a.Add,this.varientId=0,this.productId=0,this.product=null,this.specifications=[],this.varientForm=this.fb.group({id:[""],name:["",[n.q.maxLength(100)]],price:["0",[n.q.required,n.q.min(0)]],mrp:["0",[n.q.required,n.q.min(0)]],color:["",[n.q.maxLength(20)]],size:["",[n.q.maxLength(20)]],inStock:[!0],productId:["",[n.q.required]]});const l=null===(b=this.router.getCurrentNavigation())||void 0===b?void 0:b.extras.state;this.formMode=null==l?void 0:l.formMode,this.productId=null==l?void 0:l.productId,this.formMode===s.a.Edit&&(this.varientId=null==l?void 0:l.varientId)}ngOnInit(){this.formMode===s.a.Edit&&(this.getVarient(),this.getSpecificationByVarientId()),this.getProduct()}get formControls(){return this.varientForm.controls}get formModeEnum(){return s.a}getVarient(){this.spinner.show(),this.varientService.getVarient(this.varientId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):this.setFormValueForEdit(t)},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}getProduct(){this.spinner.show(),this.productService.getProduct(this.productId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):(this.product=t,this.varientForm.patchValue({productId:this.product.id}))},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}getSpecificationByVarientId(){this.spinner.show(),this.varientService.getSpecificationByVarientId(this.varientId).subscribe(t=>{this.spinner.hide(),this.specifications=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}onSubmit(){this.varientForm.valid&&this.saveVarient(this.varientForm.value)}saveVarient(t){this.formMode===s.a.Add&&(this.spinner.show(),this.varientService.saveVarient(t).subscribe(t=>{this.setFormValueForEdit(t),this.formMode=s.a.Edit,this.varientId=t.id,this.productId=t.product.id,this.spinner.hide(),this.toastr.success("New Varient saved successfully","Varient Saved!",{positionClass:"toast-bottom-center"}),this.getSpecificationByVarientId()},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===s.a.Edit&&(this.spinner.show(),this.varientService.updateVarient(this.varientId,t).subscribe(t=>{this.setFormValueForEdit(t),this.varientId=t.id,this.productId=t.product.id,this.spinner.hide(),this.toastr.success("Varient saved successfully","Varient Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}onSpecificationSave(){if(this.specifications.some(t=>0===t.name.trim().length||0===t.value.trim().length))return void a.a.fire("Oops !","Please enter specification, some field are missing.");const t=this.specifications.map(t=>t);this.saveSpecifications({specifications:t})}saveSpecifications(t){this.spinner.show(),this.varientService.saveSpecification(this.varientId,t).subscribe(t=>{this.specifications=t.list,this.spinner.hide(),this.toastr.success("Specification saved successfully","Specification Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}resetDefaultFormValue(){this.varientForm.reset({name:"",price:"0",mrp:"0",color:"",size:"",inStock:!0,productId:this.productId})}setFormValueForEdit(t){this.varientForm.reset({id:t.id,name:t.name,price:t.price,mrp:t.mrp,color:t.color,size:t.size,inStock:t.inStock,productId:t.product.id})}}return t.\u0275fac=function(r){return new(r||t)(b.Hb(l.b),b.Hb(l.a),b.Hb(n.c),b.Hb(d.b),b.Hb(u.c),b.Hb(h),b.Hb(f))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-varient-form"]],decls:61,vars:25,consts:[[1,"row"],[1,"col-md-12","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"ti-angle-double-right","icon-sm","text-info"],[1,"card-description"],[1,"col","text-right"],["type","button","routerLink","../",1,"btn","btn-warning","btn-rounded","btn-sm","btn-icon-text"],[1,"ti-arrow-left","btn-icon-prepend"],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],[4,"ngIf"],[1,"form-group","row"],[1,"col"],["for","price"],[1,"text-danger"],["type","number","formControlName","price","id","price","placeholder","Price",1,"form-control","form-control-sm",3,"ngClass"],["for","mrp"],["type","number","formControlName","mrp","id","mrp","placeholder","MRP",1,"form-control","form-control-sm",3,"ngClass"],["for","color"],["type","color","formControlName","color","id","color","placeholder","Color",1,"form-control","form-control-sm",3,"ngClass"],["for","size"],["type","text","formControlName","size","id","size","placeholder","Size",1,"form-control","form-control-sm",3,"ngClass"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox","formControlName","inStock",1,"form-check-input"],[1,"input-helper"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],["class","row",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"row","mb-3"],[1,"forms-sample",3,"ngSubmit"],["class","form-group row",4,"ngFor","ngForOf"],[1,"row","mb-1"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"fa","fa-plus","fa-lg"],["type","submit",1,"btn","btn-primary","mr-2"],[1,"col","text-center"],[1,"col-1"],[1,"col","pr-1"],["type","text","required","","placeholder","Title",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col","pl-1","pr-1"],["type","text","required","","placeholder","Specification",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-1","pl-2","d-flex","align-items-center","justify-content-center"],[1,"fa","fa-trash","fa-lg",3,"click"]],template:function(t,r){1&t&&(b.Nb(0,"div",0),b.Nb(1,"div",1),b.Nb(2,"div",2),b.Nb(3,"div",3),b.Nb(4,"h4",4),b.uc(5," Varient form "),b.Ib(6,"i",5),b.uc(7),b.Ib(8,"i",5),b.uc(9),b.Mb(),b.Nb(10,"p",6),b.uc(11," Add / Edit Varient "),b.Mb(),b.Nb(12,"div",0),b.Nb(13,"div",7),b.Nb(14,"button",8),b.Ib(15,"i",9),b.uc(16," Back "),b.Mb(),b.Mb(),b.Mb(),b.Nb(17,"form",10),b.Ub("ngSubmit",function(){return r.onSubmit()}),b.Ib(18,"ngx-spinner",11),b.Nb(19,"div",12),b.Nb(20,"label",13),b.uc(21,"Name"),b.Mb(),b.Ib(22,"input",14),b.sc(23,v,2,1,"ul",15),b.Mb(),b.Nb(24,"div",16),b.Nb(25,"div",17),b.Nb(26,"label",18),b.uc(27,"Price "),b.Nb(28,"span",19),b.uc(29,"*"),b.Mb(),b.Mb(),b.Ib(30,"input",20),b.sc(31,w,3,2,"ul",15),b.Mb(),b.Nb(32,"div",17),b.Nb(33,"label",21),b.uc(34,"MRP "),b.Nb(35,"span",19),b.uc(36,"*"),b.Mb(),b.Mb(),b.Ib(37,"input",22),b.sc(38,S,3,2,"ul",15),b.Mb(),b.Mb(),b.Nb(39,"div",16),b.Nb(40,"div",17),b.Nb(41,"label",23),b.uc(42,"Color"),b.Mb(),b.Ib(43,"input",24),b.sc(44,y,2,1,"ul",15),b.Mb(),b.Nb(45,"div",17),b.Nb(46,"label",25),b.uc(47,"Size"),b.Mb(),b.Ib(48,"input",26),b.sc(49,k,2,1,"ul",15),b.Mb(),b.Mb(),b.Nb(50,"div",12),b.Nb(51,"div",27),b.Nb(52,"label",28),b.Ib(53,"input",29),b.uc(54," In stock ? "),b.Ib(55,"i",30),b.Mb(),b.Mb(),b.Mb(),b.Nb(56,"button",31),b.uc(57,"Save"),b.Mb(),b.Nb(58,"button",32),b.Ub("click",function(){return r.onCancel()}),b.uc(59,"Cancel"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.sc(60,A,30,5,"div",33)),2&t&&(b.wb(7),b.wc(" ",null==r.product||null==r.product.category?null:r.product.category.name," "),b.wb(2),b.wc(" ",null==r.product?null:r.product.name," "),b.wb(8),b.bc("formGroup",r.varientForm),b.wb(5),b.bc("ngClass",b.dc(15,U,r.formControls.name.touched&&r.formControls.name.errors)),b.wb(1),b.bc("ngIf",r.formControls.name.touched&&r.formControls.name.errors),b.wb(7),b.bc("ngClass",b.dc(17,U,r.formControls.price.touched&&r.formControls.price.errors)),b.wb(1),b.bc("ngIf",r.formControls.price.touched&&r.formControls.price.errors),b.wb(6),b.bc("ngClass",b.dc(19,U,r.formControls.mrp.touched&&r.formControls.mrp.errors)),b.wb(1),b.bc("ngIf",r.formControls.mrp.touched&&r.formControls.mrp.errors),b.wb(5),b.bc("ngClass",b.dc(21,U,r.formControls.color.touched&&r.formControls.color.errors)),b.wb(1),b.bc("ngIf",r.formControls.color.touched&&r.formControls.color.errors),b.wb(4),b.bc("ngClass",b.dc(23,U,r.formControls.size.touched&&r.formControls.size.errors)),b.wb(1),b.bc("ngIf",r.formControls.size.touched&&r.formControls.size.errors),b.wb(7),b.bc("disabled",!r.varientForm.valid),b.wb(4),b.bc("ngIf",r.formMode==r.formModeEnum.Edit))},directives:[l.c,n.s,n.i,n.e,u.a,n.b,n.h,n.d,i.h,i.j,n.m,n.a,n.j,i.i,n.o,n.k],styles:[""]}),t})();var W=e("YCXC"),z=e("TAdN");function $(t,r){1&t&&(b.Nb(0,"li",12),b.uc(1," Name is required "),b.Mb())}function T(t,r){if(1&t&&(b.Nb(0,"li",12),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function D(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,$,2,0,"li",21),b.sc(2,T,2,1,"li",21),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.required),b.wb(1),b.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}function H(t,r){1&t&&(b.Nb(0,"li",12),b.uc(1," Category is required "),b.Mb())}function B(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,H,2,0,"li",21),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.categoryId.errors?null:t.formControls.categoryId.errors.required)}}function L(t,r){if(1&t&&(b.Nb(0,"li",12),b.uc(1),b.Mb()),2&t){const t=b.Wb(2);b.wb(1),b.wc(" Description should be maximum ",null==t.formControls.description.errors?null:t.formControls.description.errors.maxlength.requiredLength," characters. ")}}function R(t,r){if(1&t&&(b.Nb(0,"ul"),b.sc(1,L,2,1,"li",21),b.Mb()),2&t){const t=b.Wb();b.wb(1),b.bc("ngIf",null==t.formControls.description.errors?null:t.formControls.description.errors.maxlength)}}const j=function(t){return{"is-invalid":t}};let G=(()=>{class t{constructor(t,r,e,o,i,c,a){var b;this.router=t,this.route=r,this.fb=e,this.toastr=o,this.spinner=i,this.productService=c,this.categoryService=a,this.formMode=s.a.Add,this.productId=0,this.productForm=this.fb.group({id:[""],name:["",[n.q.required,n.q.maxLength(50)]],description:["",[n.q.maxLength(500)]],categoryId:["",[n.q.required]]}),this.categories=[];const l=null===(b=this.router.getCurrentNavigation())||void 0===b?void 0:b.extras.state;this.formMode=null==l?void 0:l.formMode,this.formMode===s.a.Edit&&(this.productId=null==l?void 0:l.productId)}ngOnInit(){this.formMode===s.a.Edit&&this.getProduct(),this.getCategories()}get formControls(){return this.productForm.controls}getProduct(){this.spinner.show(),this.productService.getProduct(this.productId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):this.setFormValueForEdit(t)})}getCategories(){this.spinner.show(),this.categoryService.getCategories().subscribe(t=>{this.categories=t.list,this.spinner.hide()},t=>{this.spinner.hide(),this.toastr.error(t,"Error!",{positionClass:"toast-bottom-center"})})}onSubmit(){this.productForm.valid&&this.saveProduct(this.productForm.value)}saveProduct(t){this.formMode===s.a.Add&&(this.spinner.show(),this.productService.saveProduct(t).subscribe(t=>{this.setFormValueForEdit(t),this.formMode=s.a.Edit,this.productId=t.id,this.spinner.hide(),this.toastr.success("New Product saved successfully","Product Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===s.a.Edit&&(this.spinner.show(),this.productService.updateProduct(this.productId,t).subscribe(t=>{this.setFormValueForEdit(t),this.spinner.hide(),this.toastr.success("Product saved successfully","Product Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}resetDefaultFormValue(){this.productForm.reset({name:"",description:"",categoryId:""})}setFormValueForEdit(t){this.productForm.reset({id:t.id,name:t.name,description:t.description,categoryId:t.category.id})}}return t.\u0275fac=function(r){return new(r||t)(b.Hb(l.b),b.Hb(l.a),b.Hb(n.c),b.Hb(d.b),b.Hb(u.c),b.Hb(f),b.Hb(W.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-product-form"]],decls:36,vars:12,consts:[[1,"row"],[1,"col-md-12","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"card-title","justify-content-between","d-flex"],["type","button","routerLink","../",1,"btn","btn-warning","btn-rounded","btn-sm","btn-icon-text"],[1,"ti-arrow-left","btn-icon-prepend"],[1,"card-description"],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],[4,"ngIf"],["for","categoryId"],["formControlName","categoryId","optionValueField","id","optionTextField","name","id","categoryId","placeholder","Please select catrgory...",3,"items"],["for","description"],["formControlName","description","rows","6","id","description","placeholder","Description",1,"form-control","form-control-sm",3,"ngClass"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],["class","text-danger",4,"ngIf"]],template:function(t,r){1&t&&(b.Nb(0,"div",0),b.Nb(1,"div",1),b.Nb(2,"div",2),b.Nb(3,"div",3),b.Nb(4,"h4",4),b.uc(5," Product form "),b.Nb(6,"button",5),b.Ib(7,"i",6),b.uc(8," Back "),b.Mb(),b.Mb(),b.Nb(9,"p",7),b.uc(10," Add / Edit Product "),b.Mb(),b.Nb(11,"form",8),b.Ub("ngSubmit",function(){return r.onSubmit()}),b.Ib(12,"ngx-spinner",9),b.Nb(13,"div",10),b.Nb(14,"label",11),b.uc(15,"Name "),b.Nb(16,"span",12),b.uc(17,"*"),b.Mb(),b.Mb(),b.Ib(18,"input",13),b.sc(19,D,3,2,"ul",14),b.Mb(),b.Nb(20,"div",10),b.Nb(21,"label",15),b.uc(22,"Category "),b.Nb(23,"span",12),b.uc(24,"*"),b.Mb(),b.Mb(),b.Ib(25,"ngx-select",16),b.sc(26,B,2,1,"ul",14),b.Mb(),b.Nb(27,"div",10),b.Nb(28,"label",17),b.uc(29,"Description"),b.Mb(),b.Ib(30,"textarea",18),b.sc(31,R,2,1,"ul",14),b.Mb(),b.Nb(32,"button",19),b.uc(33,"Save"),b.Mb(),b.Nb(34,"button",20),b.Ub("click",function(){return r.onCancel()}),b.uc(35,"Cancel"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&t&&(b.wb(11),b.bc("formGroup",r.productForm),b.wb(7),b.bc("ngClass",b.dc(8,j,r.formControls.name.touched&&r.formControls.name.errors)),b.wb(1),b.bc("ngIf",r.formControls.name.touched&&r.formControls.name.errors),b.wb(6),b.bc("items",r.categories),b.wb(1),b.bc("ngIf",r.formControls.categoryId.touched&&r.formControls.categoryId.errors),b.wb(4),b.bc("ngClass",b.dc(10,j,r.formControls.description.touched&&r.formControls.description.errors)),b.wb(1),b.bc("ngIf",r.formControls.description.touched&&r.formControls.description.errors),b.wb(1),b.bc("disabled",!r.productForm.valid))},directives:[l.c,n.s,n.i,n.e,u.a,n.b,n.h,n.d,i.h,i.j,z.a],styles:[""]}),t})();var Y=e("riYF"),J=e("SmQN"),Q=e("hvj1");const X=["varientTableEl"];function K(t,r){if(1&t){const t=b.Ob();b.Nb(0,"tr",24),b.Nb(1,"td",25),b.Nb(2,"h6",26),b.Ub("click",function(){b.kc(t);const e=r.$implicit;return b.Wb().onProductSelected(e)}),b.uc(3,"Name : "),b.Nb(4,"span",27),b.uc(5),b.Mb(),b.Mb(),b.Nb(6,"h6"),b.uc(7,"Category : "),b.Nb(8,"span",27),b.uc(9),b.Mb(),b.Mb(),b.Nb(10,"div",28),b.Ib(11,"i",29),b.Nb(12,"div",30),b.Nb(13,"span",31),b.Ub("click",function(){b.kc(t);const e=r.$implicit,o=r.index;return b.Wb().onProductEdit(e,o)}),b.Ib(14,"i",32),b.uc(15,"Edit "),b.Mb(),b.Nb(16,"span",33),b.Ub("confirm",function(){b.kc(t);const e=r.$implicit;return b.Wb().onDelete(e)}),b.Ib(17,"i",34),b.uc(18,"Delete "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"td"),b.Nb(20,"button",35),b.Ib(21,"i",36),b.Mb(),b.Ib(22,"swal",37,38),b.Nb(24,"button",39),b.Ub("click",function(){b.kc(t);const e=r.$implicit,o=r.index;return b.Wb().onProductEdit(e,o)}),b.Ib(25,"i",40),b.Mb(),b.Nb(26,"button",41),b.Ub("confirm",function(){b.kc(t);const e=r.$implicit;return b.Wb().onDelete(e)}),b.Ib(27,"i",42),b.Mb(),b.Ib(28,"swal",43,44),b.Mb(),b.Mb()}if(2&t){const t=r.$implicit,e=b.ic(23),o=b.ic(29),i=b.Wb();b.bc("ngClass",t.id===(null==i.selectedProduct?null:i.selectedProduct.id)?"table-warning":""),b.wb(5),b.vc(t.name),b.wb(4),b.vc(t.category.name),b.wb(7),b.bc("swal",o),b.wb(4),b.bc("swal",e),b.wb(2),b.bc("text",t.description),b.wb(4),b.bc("swal",o),b.wb(2),b.bc("showCancelButton",!0)("focusCancel",!0)}}function Z(t,r){1&t&&(b.Nb(0,"tr"),b.Nb(1,"td",45),b.uc(2," No records available "),b.Mb(),b.Mb())}function _(t,r){if(1&t){const t=b.Ob();b.Nb(0,"tr"),b.Nb(1,"td",25),b.Nb(2,"h6"),b.uc(3,"Name : "),b.Nb(4,"span",27),b.uc(5),b.Mb(),b.Mb(),b.Nb(6,"h6"),b.uc(7,"MRP : "),b.Nb(8,"span",27),b.uc(9),b.Mb(),b.uc(10," \u2022 Price : "),b.Nb(11,"span",27),b.uc(12),b.Mb(),b.Mb(),b.Nb(13,"h6"),b.uc(14,"In stock : "),b.Nb(15,"span",27),b.uc(16),b.Mb(),b.Mb(),b.Nb(17,"div",28),b.Ib(18,"i",29),b.Nb(19,"div",30),b.Nb(20,"span",31),b.Ub("click",function(){b.kc(t);const e=r.$implicit,o=r.index;return b.Wb(2).onVarientEdit(e,o)}),b.Ib(21,"i",32),b.uc(22,"Edit "),b.Mb(),b.Nb(23,"span",33),b.Ub("confirm",function(){b.kc(t);const e=r.$implicit;return b.Wb(2).onVarientDelete(e)}),b.Ib(24,"i",34),b.uc(25,"Delete "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(26,"td"),b.Nb(27,"button",39),b.Ub("click",function(){b.kc(t);const e=r.$implicit,o=r.index;return b.Wb(2).onVarientEdit(e,o)}),b.Ib(28,"i",40),b.Mb(),b.Nb(29,"button",41),b.Ub("confirm",function(){b.kc(t);const e=r.$implicit;return b.Wb(2).onVarientDelete(e)}),b.Ib(30,"i",42),b.Mb(),b.Ib(31,"swal",43,44),b.Mb(),b.Mb()}if(2&t){const t=r.$implicit,e=b.ic(32);b.wb(5),b.vc(t.name),b.wb(4),b.vc(t.mrp),b.wb(3),b.vc(t.price),b.wb(4),b.vc(t.inStock?"Yes":"No"),b.wb(7),b.bc("swal",e),b.wb(6),b.bc("swal",e),b.wb(2),b.bc("showCancelButton",!0)("focusCancel",!0)}}function tt(t,r){1&t&&(b.Nb(0,"tr"),b.Nb(1,"td",45),b.uc(2," No records available "),b.Mb(),b.Mb())}function rt(t,r){if(1&t){const t=b.Ob();b.Nb(0,"div",2),b.Nb(1,"div",3,46),b.Nb(3,"div",4),b.Nb(4,"div",0),b.Nb(5,"div",5),b.Nb(6,"h4",6),b.uc(7),b.Ib(8,"i",47),b.uc(9),b.Mb(),b.Nb(10,"p",7),b.uc(11," List of varients "),b.Mb(),b.Mb(),b.Nb(12,"div",8),b.Nb(13,"div",9),b.Nb(14,"input",10),b.Ub("ngModelChange",function(r){return b.kc(t),b.Wb().varientSearch=r}),b.Mb(),b.Nb(15,"div",11),b.Nb(16,"button",12),b.Ub("click",function(){return b.kc(t),b.Wb().onVarientSearchClick()}),b.Ib(17,"i",13),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(18,"div",0),b.Nb(19,"div",14),b.Nb(20,"button",15),b.Ub("click",function(){return b.kc(t),b.Wb().onVarientAdd()}),b.Ib(21,"i",16),b.uc(22," Add Varient "),b.Mb(),b.Mb(),b.Mb(),b.Nb(23,"div",17),b.Nb(24,"table",18),b.Nb(25,"thead"),b.Nb(26,"tr"),b.Nb(27,"th"),b.uc(28,"Varient Details"),b.Mb(),b.Nb(29,"th"),b.uc(30,"Action"),b.Mb(),b.Mb(),b.Mb(),b.Nb(31,"tbody"),b.sc(32,_,33,8,"tr",48),b.sc(33,tt,3,0,"tr",20),b.Mb(),b.Nb(34,"tfoot"),b.Nb(35,"td",21),b.Nb(36,"app-rb-paginator",22),b.Ub("pageChange",function(r){return b.kc(t),b.Wb().onVarientPageChange(r)}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()}if(2&t){const t=b.Wb();b.wb(7),b.wc(" ",null==t.selectedProduct||null==t.selectedProduct.category?null:t.selectedProduct.category.name," "),b.wb(2),b.wc(" ",null==t.selectedProduct?null:t.selectedProduct.name," "),b.wb(5),b.bc("ngModel",t.varientSearch),b.wb(18),b.bc("ngForOf",t.varients),b.wb(1),b.bc("ngIf",!t.varients.length),b.wb(3),b.bc("paginationOptions",t.varientPageOpts)}}let et=(()=>{class t{constructor(t,r,e,o,i,n){this.productService=t,this.toastr=r,this.spinner=e,this.router=o,this.route=i,this.varientService=n,this.products=[],this.productSearch="",this.productPageOpts={pageSize:5,page:0,pageTotal:0,total:1},this.selectedProduct=null,this.varients=[],this.varientSearch="",this.varientPageOpts={pageSize:5,page:0,pageTotal:0,total:1}}ngOnInit(){this.getAllProducts()}getAllProducts(){this.spinner.show(),this.productService.getAllProducts(this.productPageOpts.page,this.productPageOpts.pageSize,this.productSearch.trim()).subscribe(t=>{this.products=t.list,this.productPageOpts.page=t.page,this.productPageOpts.pageSize=t.pageSize,this.productPageOpts.pageTotal=t.pageTotal,this.productPageOpts.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onProductPageChange(t){this.getAllProducts()}onProductSearchClick(){this.productPageOpts.page=0,this.getAllProducts()}onDelete(t){this.spinner.show(),this.productService.deleteProduct(t.id).subscribe(t=>{this.products=this.products.filter(r=>r.id!==t.id),this.spinner.hide(),this.toastr.success("Product removed successfully","Product Removed!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error(t,"Failed!",{positionClass:"toast-bottom-center"})})}onProductAdd(){this.router.navigate(["../product-form"],{relativeTo:this.route,state:{formMode:s.a.Add}})}onProductEdit(t,r){this.router.navigate(["../product-form"],{relativeTo:this.route,state:{formMode:s.a.Edit,productId:t.id}})}onProductSelected(t){null===this.selectedProduct||this.selectedProduct.id!==t.id?(this.selectedProduct=t,this.getAllVarients(),setTimeout(()=>{Object(Y.a)()&&this.varientTableEl.nativeElement.scrollIntoView({behavior:"smooth"})},100)):this.selectedProduct=null}getAllVarients(){var t;this.spinner.show(),this.varientService.getAllVarients(this.varientPageOpts.page,this.varientPageOpts.pageSize,this.varientSearch.trim(),Number(null===(t=this.selectedProduct)||void 0===t?void 0:t.id)).subscribe(t=>{this.varients=t.list,this.varientPageOpts.page=t.page,this.varientPageOpts.pageSize=t.pageSize,this.varientPageOpts.pageTotal=t.pageTotal,this.varientPageOpts.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onVarientPageChange(t){this.getAllVarients()}onVarientSearchClick(){this.varientPageOpts.page=0,this.getAllVarients()}onVarientDelete(t){this.spinner.show(),this.varientService.deleteVarient(t.id).subscribe(t=>{this.varients=this.varients.filter(r=>r.id!==t.id),this.spinner.hide(),this.toastr.success("Varient removed successfully","Varient Removed!",{positionClass:"toast-bottom-center"})})}onVarientAdd(){var t;this.router.navigate(["../varient-form"],{relativeTo:this.route,state:{formMode:s.a.Add,productId:null===(t=this.selectedProduct)||void 0===t?void 0:t.id}})}onVarientEdit(t,r){var e;this.router.navigate(["../varient-form"],{relativeTo:this.route,state:{formMode:s.a.Edit,productId:null===(e=this.selectedProduct)||void 0===e?void 0:e.id,varientId:t.id}})}}return t.\u0275fac=function(r){return new(r||t)(b.Hb(f),b.Hb(d.b),b.Hb(u.c),b.Hb(l.b),b.Hb(l.a),b.Hb(h))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-product-list"]],viewQuery:function(t,r){if(1&t&&b.yc(X,!0),2&t){let t;b.hc(t=b.Vb())&&(r.varientTableEl=t.first)}},decls:37,vars:5,consts:[[1,"row"],["type","ball-grid-pulse","size","medium"],[1,"col-lg-6","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"col-lg"],[1,"card-title"],[1,"card-description"],[1,"form-group","col-lg"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"ti-search"],[1,"col","text-right"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"ti-plus","btn-icon-prepend"],[1,"table-responsive"],[1,"table","table-hover"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","2"],[3,"paginationOptions","pageChange"],["class","col-lg-6 grid-margin transparent",4,"ngIf"],[3,"ngClass"],[1,"d-flex","flex-column"],[1,"cursor-pointer","font-weight-bold",3,"click"],[1,"text-primary"],[1,"dropdown","d-block","d-md-none","text-left"],["id","action-btn-dropdown","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"fa","fa-ellipsis-v","icon-sm","text-success","cursor-pointer","mx-2","px-2"],["aria-labelledby","action-btn-dropdown","x-placement","bottom-start",1,"dropdown-menu",2,"position","absolute","will-change","transform","top","0px","left","0px","transform","translate3d(0px, 31px, 0px)"],[1,"dropdown-item","text-info","cursor-pointer",3,"click"],[1,"ti-pencil","mr-2"],[1,"dropdown-item","text-danger","cursor-pointer",3,"swal","confirm"],[1,"ti-trash","mr-2"],["type","button",1,"btn","btn-info","btn-rounded","btn-icon","mr-1",3,"swal"],[1,"ti-info"],["title","Product Description","padding","1em 0","etc","",3,"text"],["descSwal",""],["type","button",1,"btn","btn-info","btn-rounded","btn-icon","mr-1",3,"click"],[1,"ti-pencil"],["type","button",1,"btn","btn-danger","btn-rounded","btn-icon",3,"swal","confirm"],[1,"ti-trash"],["title","Are you sure?","text","This cannot be undone","icon","question","padding","1em 0","etc","",3,"showCancelButton","focusCancel"],["deleteSwal",""],["colspan","2",1,"text-center"],["varientTableEl",""],[1,"ti-angle-double-right","icon-sm","text-info"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(b.Nb(0,"div",0),b.Ib(1,"ngx-spinner",1),b.Nb(2,"div",2),b.Nb(3,"div",3),b.Nb(4,"div",4),b.Nb(5,"div",0),b.Nb(6,"div",5),b.Nb(7,"h4",6),b.uc(8,"Products"),b.Mb(),b.Nb(9,"p",7),b.uc(10," List of products "),b.Mb(),b.Mb(),b.Nb(11,"div",8),b.Nb(12,"div",9),b.Nb(13,"input",10),b.Ub("ngModelChange",function(t){return r.productSearch=t}),b.Mb(),b.Nb(14,"div",11),b.Nb(15,"button",12),b.Ub("click",function(){return r.onProductSearchClick()}),b.Ib(16,"i",13),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(17,"div",0),b.Nb(18,"div",14),b.Nb(19,"button",15),b.Ub("click",function(){return r.onProductAdd()}),b.Ib(20,"i",16),b.uc(21," Add Product "),b.Mb(),b.Mb(),b.Mb(),b.Nb(22,"div",17),b.Nb(23,"table",18),b.Nb(24,"thead"),b.Nb(25,"tr"),b.Nb(26,"th"),b.uc(27,"Product Details"),b.Mb(),b.Nb(28,"th"),b.uc(29,"Action"),b.Mb(),b.Mb(),b.Mb(),b.Nb(30,"tbody"),b.sc(31,K,30,9,"tr",19),b.sc(32,Z,3,0,"tr",20),b.Mb(),b.Nb(33,"tfoot"),b.Nb(34,"td",21),b.Nb(35,"app-rb-paginator",22),b.Ub("pageChange",function(t){return r.onProductPageChange(t)}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.sc(36,rt,37,6,"div",23),b.Mb()),2&t&&(b.wb(13),b.bc("ngModel",r.productSearch),b.wb(18),b.bc("ngForOf",r.products),b.wb(1),b.bc("ngIf",!r.products.length),b.wb(3),b.bc("paginationOptions",r.productPageOpts),b.wb(1),b.bc("ngIf",null!==r.selectedProduct))},directives:[u.a,n.b,n.h,n.k,i.i,i.j,J.a,i.h,Q.b,Q.a],styles:[""]}),t})(),ot=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=b.Bb({type:t,selectors:[["app-product"]],decls:8,vars:0,consts:[[1,"content-wrapper"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"col-12","col-xl-8","mb-4","mb-xl-0"],[1,"font-weight-bold"]],template:function(t,r){1&t&&(b.Nb(0,"div",0),b.Nb(1,"div",1),b.Nb(2,"div",2),b.Nb(3,"div",1),b.Nb(4,"div",3),b.Nb(5,"h3",4),b.uc(6,"Product"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Ib(7,"router-outlet"),b.Mb())},directives:[l.g],styles:[""]}),t})();var it=e("SqGc"),nt=e("PzTl");const st=[{path:"",component:ot,children:[{path:"",redirectTo:"product-list",pathMatch:"full"},{path:"product-list",component:et,canActivate:[it.a],data:{roles:[nt.a.Admin,nt.a.Staff]}},{path:"product-form",component:G,canActivate:[it.a],data:{roles:[nt.a.Admin,nt.a.Staff]}},{path:"varient-form",component:q,canActivate:[it.a],data:{roles:[nt.a.Admin,nt.a.Staff]}}]}];let ct=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(r){return new(r||t)},imports:[[l.f.forChild(st)],l.f]}),t})(),at=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(r){return new(r||t)},imports:[[i.b,ct,o.a]]}),t})()}}]);