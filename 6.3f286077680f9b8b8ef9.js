(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{lDgq:function(t,e,o){"use strict";o.r(e),o.d(e,"CategoryModule",function(){return F});var i=o("SVse"),r=o("d2mR"),n=o("iInd"),s=o("s7LF"),a=o("V2nQ"),b=o("riYF"),c=o("8Y7J"),l=o("YCXC"),g=o("EApP"),d=o("JqCM"),u=o("SmQN"),h=o("hvj1");const m=["categoryFormEl"];function p(t,e){if(1&t){const t=c.Ob();c.Nb(0,"tr"),c.Nb(1,"td"),c.uc(2),c.Mb(),c.Nb(3,"td"),c.Nb(4,"button",33),c.Ub("click",function(){c.kc(t);const o=e.$implicit,i=e.index;return c.Wb().onEdit(o,i)}),c.Ib(5,"i",34),c.Mb(),c.Nb(6,"button",35),c.Ub("confirm",function(){c.kc(t);const o=e.$implicit;return c.Wb().onDelete(o)}),c.Ib(7,"i",36),c.Mb(),c.Ib(8,"swal",37,38),c.Mb(),c.Mb()}if(2&t){const t=e.$implicit,o=c.ic(9);c.wb(2),c.vc(t.name),c.wb(4),c.bc("swal",o),c.wb(2),c.bc("showCancelButton",!0)("focusCancel",!0)}}function f(t,e){1&t&&(c.Nb(0,"tr"),c.Nb(1,"td",39),c.uc(2," No records available "),c.Mb(),c.Mb())}function y(t,e){1&t&&(c.Nb(0,"li",29),c.uc(1," Name is required "),c.Mb())}function C(t,e){if(1&t&&(c.Nb(0,"li",29),c.uc(1),c.Mb()),2&t){const t=c.Wb(2);c.wb(1),c.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function M(t,e){if(1&t&&(c.Nb(0,"ul"),c.sc(1,y,2,0,"li",40),c.sc(2,C,2,1,"li",40),c.Mb()),2&t){const t=c.Wb();c.wb(1),c.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.required),c.wb(1),c.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}const N=function(t){return{"is-invalid":t}},v=[{path:"",component:(()=>{class t{constructor(t,e,o,i){this.categoryService=t,this.fb=e,this.toastr=o,this.spinner=i,this.categories=[],this.formMode=a.a.Add,this.editIndex=-1,this.categoryForm=this.fb.group({id:[""],name:["",[s.q.required,s.q.maxLength(50)]]}),this.search="",this.paginationOptions={pageSize:5,page:0,pageTotal:0,total:1}}ngOnInit(){this.getAllCategories()}get formControls(){return this.categoryForm.controls}getAllCategories(){this.spinner.show(),this.categoryService.getAllCategories(this.paginationOptions.page,this.paginationOptions.pageSize,this.search.trim()).subscribe(t=>{this.categories=t.list,this.paginationOptions.page=t.page,this.paginationOptions.pageSize=t.pageSize,this.paginationOptions.pageTotal=t.pageTotal,this.paginationOptions.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onPageChange(t){this.getAllCategories()}onSearchClick(){this.paginationOptions.page=0,this.getAllCategories()}onDelete(t){this.spinner.show(),this.categoryService.deleteCategory(t.id).subscribe(t=>{this.categories=this.categories.filter(e=>e.id!==t.id),this.spinner.hide(),this.toastr.success("Category removed successfully","Category Removed!",{positionClass:"toast-bottom-center"})})}onEdit(t,e){this.spinner.show(),this.categoryService.getCategory(t.id).subscribe(t=>{this.spinner.hide(),t.deleted?this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}):(this.setFormValueForEdit(t,e),Object(b.a)()&&this.categoryFormEl.nativeElement.scrollIntoView({behavior:"smooth"}))})}onSubmit(){this.categoryForm.valid&&this.saveCategory(this.categoryForm.value)}saveCategory(t){this.formMode===a.a.Add&&(this.spinner.show(),this.categoryService.saveCategory(t).subscribe(t=>{this.categories.push(t),this.resetDefaultFormValue(),this.spinner.hide(),this.toastr.success("New category saved successfully","Category Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===a.a.Edit&&(this.spinner.show(),this.categoryService.updateCategory(t.id,t).subscribe(t=>{this.categories[this.editIndex]=t,this.resetDefaultFormValue(),this.spinner.hide(),this.toastr.success("Category saved successfully","Category Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}resetDefaultFormValue(){this.categoryForm.reset({id:"",name:""}),this.formMode=a.a.Add,this.editIndex=-1}setFormValueForEdit(t,e){this.categoryForm.reset({id:t.id,name:t.name}),this.formMode=a.a.Edit,this.editIndex=e}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(l.a),c.Hb(s.c),c.Hb(g.b),c.Hb(d.c))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-category"]],viewQuery:function(t,e){if(1&t&&c.yc(m,!0),2&t){let t;c.hc(t=c.Vb())&&(e.categoryFormEl=t.first)}},decls:58,vars:10,consts:[[1,"content-wrapper"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"col-12","col-xl-8","mb-4","mb-xl-0"],[1,"font-weight-bold"],[1,"col-lg-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"col-lg"],[1,"card-title"],[1,"card-description"],[1,"form-group","col-lg"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"ti-search"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","2"],[3,"paginationOptions","pageChange"],[1,"col-md-6","grid-margin","transparent"],["categoryFormEl",""],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-info","btn-rounded","btn-icon","mr-1",3,"click"],[1,"ti-pencil"],["type","button",1,"btn","btn-danger","btn-rounded","btn-icon",3,"swal","confirm"],[1,"ti-trash"],["title","Are you sure?","text","This cannot be undone","icon","question","padding","1em 0","etc","",3,"showCancelButton","focusCancel"],["deleteSwal",""],["colspan","2",1,"text-center"],["class","text-danger",4,"ngIf"]],template:function(t,e){1&t&&(c.Nb(0,"div",0),c.Nb(1,"div",1),c.Nb(2,"div",2),c.Nb(3,"div",1),c.Nb(4,"div",3),c.Nb(5,"h3",4),c.uc(6,"Category"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(7,"div",1),c.Nb(8,"div",5),c.Nb(9,"div",6),c.Nb(10,"div",7),c.Nb(11,"div",1),c.Nb(12,"div",8),c.Nb(13,"h4",9),c.uc(14,"Categories"),c.Mb(),c.Nb(15,"p",10),c.uc(16," List of categories "),c.Mb(),c.Mb(),c.Nb(17,"div",11),c.Nb(18,"div",12),c.Nb(19,"input",13),c.Ub("ngModelChange",function(t){return e.search=t}),c.Mb(),c.Nb(20,"div",14),c.Nb(21,"button",15),c.Ub("click",function(){return e.onSearchClick()}),c.Ib(22,"i",16),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(23,"div",17),c.Nb(24,"table",18),c.Nb(25,"thead"),c.Nb(26,"tr"),c.Nb(27,"th"),c.uc(28,"Category Name"),c.Mb(),c.Nb(29,"th"),c.uc(30,"Action"),c.Mb(),c.Mb(),c.Mb(),c.Nb(31,"tbody"),c.sc(32,p,10,4,"tr",19),c.sc(33,f,3,0,"tr",20),c.Mb(),c.Nb(34,"tfoot"),c.Nb(35,"td",21),c.Nb(36,"app-rb-paginator",22),c.Ub("pageChange",function(t){return e.onPageChange(t)}),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(37,"div",23),c.Nb(38,"div",6,24),c.Nb(40,"div",7),c.Nb(41,"h4",9),c.uc(42,"Category form"),c.Mb(),c.Nb(43,"p",10),c.uc(44," Add / Edit Category "),c.Mb(),c.Nb(45,"form",25),c.Ub("ngSubmit",function(){return e.onSubmit()}),c.Ib(46,"ngx-spinner",26),c.Nb(47,"div",27),c.Nb(48,"label",28),c.uc(49,"Name "),c.Nb(50,"span",29),c.uc(51,"*"),c.Mb(),c.Mb(),c.Ib(52,"input",30),c.sc(53,M,3,2,"ul",20),c.Mb(),c.Nb(54,"button",31),c.uc(55,"Save"),c.Mb(),c.Nb(56,"button",32),c.Ub("click",function(){return e.onCancel()}),c.uc(57,"Cancel"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.wb(19),c.bc("ngModel",e.search),c.wb(13),c.bc("ngForOf",e.categories),c.wb(1),c.bc("ngIf",!e.categories.length),c.wb(3),c.bc("paginationOptions",e.paginationOptions),c.wb(9),c.bc("formGroup",e.categoryForm),c.wb(7),c.bc("ngClass",c.dc(8,N,e.formControls.name.touched&&e.formControls.name.errors)),c.wb(1),c.bc("ngIf",e.formControls.name.touched&&e.formControls.name.errors),c.wb(1),c.bc("disabled",!e.categoryForm.valid))},directives:[s.b,s.h,s.k,i.i,i.j,u.a,s.s,s.i,s.e,d.a,s.d,i.h,h.b,h.a],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(v)],n.f]}),t})(),F=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[i.b,w,r.a]]}),t})()}}]);