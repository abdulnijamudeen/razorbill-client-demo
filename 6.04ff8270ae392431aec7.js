(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{lDgq:function(t,e,i){"use strict";i.r(e),i.d(e,"CategoryModule",function(){return F});var o=i("SVse"),r=i("d2mR"),n=i("iInd"),s=i("s7LF"),a=i("V2nQ"),b=i("riYF"),c=i("8Y7J"),l=i("YCXC"),g=i("EApP"),h=i("JqCM"),d=i("SmQN"),u=i("hvj1");const p=["categoryFormEl"];function m(t,e){if(1&t){const t=c.Ob();c.Nb(0,"tr"),c.Nb(1,"td"),c.Nb(2,"h6",36),c.uc(3),c.Mb(),c.Nb(4,"div"),c.Nb(5,"span",37),c.Ub("click",function(){c.kc(t);const i=e.$implicit,o=e.index;return c.Wb().onEdit(i,o)}),c.Ib(6,"i",38),c.uc(7," Edit"),c.Mb(),c.Nb(8,"span",39),c.Ub("confirm",function(){c.kc(t);const i=e.$implicit;return c.Wb().onDelete(i)}),c.Ib(9,"i",40),c.uc(10," Delete"),c.Mb(),c.Ib(11,"swal",41,42),c.Mb(),c.Mb(),c.Mb()}if(2&t){const t=e.$implicit,i=c.ic(12);c.wb(3),c.vc(t.name),c.wb(5),c.bc("swal",i),c.wb(3),c.bc("showCancelButton",!0)("focusCancel",!0)}}function f(t,e){1&t&&(c.Nb(0,"tr"),c.Nb(1,"td",43),c.uc(2," No records available "),c.Mb(),c.Mb())}function C(t,e){1&t&&(c.Nb(0,"li",32),c.uc(1," Name is required "),c.Mb())}function M(t,e){if(1&t&&(c.Nb(0,"li",32),c.uc(1),c.Mb()),2&t){const t=c.Wb(2);c.wb(1),c.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function N(t,e){if(1&t&&(c.Nb(0,"ul"),c.sc(1,C,2,0,"li",44),c.sc(2,M,2,1,"li",44),c.Mb()),2&t){const t=c.Wb();c.wb(1),c.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.required),c.wb(1),c.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}const y=function(t){return{"is-invalid":t}},v=[{path:"",component:(()=>{class t{constructor(t,e,i,o){this.categoryService=t,this.fb=e,this.toastr=i,this.spinner=o,this.categories=[],this.formMode=a.a.Add,this.editIndex=-1,this.categoryForm=this.fb.group({id:[""],name:["",[s.q.required,s.q.maxLength(50)]]}),this.search="",this.paginationOptions={pageSize:5,page:0,pageTotal:0,total:1}}ngOnInit(){this.getAllCategories()}get formControls(){return this.categoryForm.controls}getAllCategories(){this.spinner.show(),this.categoryService.getAllCategories(this.paginationOptions.page,this.paginationOptions.pageSize,this.search.trim()).subscribe(t=>{this.categories=t.list,this.paginationOptions.page=t.page,this.paginationOptions.pageSize=t.pageSize,this.paginationOptions.pageTotal=t.pageTotal,this.paginationOptions.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onPageChange(t){this.getAllCategories()}onSearchClick(){0!==this.search.trim().length?(this.paginationOptions.page=0,this.getAllCategories()):this.search=""}onClear(){0!==this.search.trim().length?(this.search="",this.paginationOptions.page=0,this.getAllCategories()):this.search=""}onRefresh(){this.search="",this.paginationOptions.page=0,this.getAllCategories()}onDelete(t){this.spinner.show(),this.categoryService.deleteCategory(t.id).subscribe(t=>{this.categories=this.categories.filter(e=>e.id!==t.id),this.spinner.hide(),this.toastr.success("Category removed successfully","Category Removed!",{positionClass:"toast-bottom-center"})})}onEdit(t,e){this.spinner.show(),this.categoryService.getCategory(t.id).subscribe(t=>{this.spinner.hide(),t.deleted?this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}):(this.setFormValueForEdit(t,e),Object(b.b)()&&this.categoryFormEl.nativeElement.scrollIntoView({behavior:"smooth"}))})}onSubmit(){this.categoryForm.valid&&this.saveCategory(this.categoryForm.value)}saveCategory(t){this.formMode===a.a.Add&&(this.spinner.show(),this.categoryService.saveCategory(t).subscribe(t=>{this.categories.push(t),this.resetDefaultFormValue(),this.spinner.hide(),this.toastr.success("New category saved successfully","Category Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===a.a.Edit&&(this.spinner.show(),this.categoryService.updateCategory(t.id,t).subscribe(t=>{this.categories[this.editIndex]=t,this.resetDefaultFormValue(),this.spinner.hide(),this.toastr.success("Category saved successfully","Category Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}resetDefaultFormValue(){this.categoryForm.reset({id:"",name:""}),this.formMode=a.a.Add,this.editIndex=-1}setFormValueForEdit(t,e){this.categoryForm.reset({id:t.id,name:t.name}),this.formMode=a.a.Edit,this.editIndex=e}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(l.a),c.Hb(s.c),c.Hb(g.b),c.Hb(h.c))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-category"]],viewQuery:function(t,e){if(1&t&&c.yc(p,!0),2&t){let t;c.hc(t=c.Vb())&&(e.categoryFormEl=t.first)}},decls:63,vars:10,consts:[[1,"content-wrapper"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"col-12","col-xl-8","mb-4","mb-xl-0"],[1,"font-weight-bold"],[1,"col-lg-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"col-lg"],[1,"card-title"],[1,"card-description"],[1,"form-group","col-lg"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"ti-close"],[1,"ti-search"],[1,"col","text-right"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"fa","fa-refresh","btn-icon-prepend"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"paginationOptions","pageChange"],[1,"col-md-6","grid-margin","transparent"],["categoryFormEl",""],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],[1,"text-primary"],[1,"badge","bg-info","text-white","cursor-pointer","mr-1",3,"click"],[1,"ti-pencil"],[1,"badge","bg-danger","text-white","cursor-pointer",3,"swal","confirm"],[1,"ti-trash"],["title","Are you sure?","text","This cannot be undone","icon","question","padding","1em 0",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"text-center"],["class","text-danger",4,"ngIf"]],template:function(t,e){1&t&&(c.Nb(0,"div",0),c.Nb(1,"div",1),c.Nb(2,"div",2),c.Nb(3,"div",1),c.Nb(4,"div",3),c.Nb(5,"h3",4),c.uc(6,"Category"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(7,"div",1),c.Nb(8,"div",5),c.Nb(9,"div",6),c.Nb(10,"div",7),c.Nb(11,"div",1),c.Nb(12,"div",8),c.Nb(13,"h4",9),c.uc(14,"Categories"),c.Mb(),c.Nb(15,"p",10),c.uc(16," List of categories "),c.Mb(),c.Mb(),c.Nb(17,"div",11),c.Nb(18,"div",12),c.Nb(19,"input",13),c.Ub("ngModelChange",function(t){return e.search=t}),c.Mb(),c.Nb(20,"div",14),c.Nb(21,"button",15),c.Ub("click",function(){return e.onClear()}),c.Ib(22,"i",16),c.Mb(),c.Nb(23,"button",15),c.Ub("click",function(){return e.onSearchClick()}),c.Ib(24,"i",17),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(25,"div",1),c.Nb(26,"div",18),c.Nb(27,"button",19),c.Ub("click",function(){return e.onRefresh()}),c.Ib(28,"i",20),c.uc(29," Refresh "),c.Mb(),c.Mb(),c.Mb(),c.Nb(30,"div",21),c.Nb(31,"table",22),c.Nb(32,"thead"),c.Nb(33,"tr"),c.Nb(34,"th"),c.uc(35,"Category"),c.Mb(),c.Mb(),c.Mb(),c.Nb(36,"tbody"),c.sc(37,m,13,4,"tr",23),c.sc(38,f,3,0,"tr",24),c.Mb(),c.Nb(39,"tfoot"),c.Nb(40,"td"),c.Nb(41,"app-rb-paginator",25),c.Ub("pageChange",function(t){return e.onPageChange(t)}),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(42,"div",26),c.Nb(43,"div",6,27),c.Nb(45,"div",7),c.Nb(46,"h4",9),c.uc(47,"Category form"),c.Mb(),c.Nb(48,"p",10),c.uc(49," Add / Edit Category "),c.Mb(),c.Nb(50,"form",28),c.Ub("ngSubmit",function(){return e.onSubmit()}),c.Ib(51,"ngx-spinner",29),c.Nb(52,"div",30),c.Nb(53,"label",31),c.uc(54,"Name "),c.Nb(55,"span",32),c.uc(56,"*"),c.Mb(),c.Mb(),c.Ib(57,"input",33),c.sc(58,N,3,2,"ul",24),c.Mb(),c.Nb(59,"button",34),c.uc(60,"Save"),c.Mb(),c.Nb(61,"button",35),c.Ub("click",function(){return e.onCancel()}),c.uc(62,"Cancel"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.wb(19),c.bc("ngModel",e.search),c.wb(18),c.bc("ngForOf",e.categories),c.wb(1),c.bc("ngIf",!e.categories.length),c.wb(3),c.bc("paginationOptions",e.paginationOptions),c.wb(9),c.bc("formGroup",e.categoryForm),c.wb(7),c.bc("ngClass",c.dc(8,y,e.formControls.name.touched&&e.formControls.name.errors)),c.wb(1),c.bc("ngIf",e.formControls.name.touched&&e.formControls.name.errors),c.wb(1),c.bc("disabled",!e.categoryForm.valid))},directives:[s.b,s.h,s.k,o.i,o.j,d.a,s.s,s.i,s.e,h.a,s.d,o.h,u.b,u.a],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(v)],n.e]}),t})(),F=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[o.b,w,r.a]]}),t})()}}]);