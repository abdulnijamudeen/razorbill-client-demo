(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+YfB":function(t,e,r){"use strict";r.r(e),r.d(e,"ProductModule",function(){return wt});var i=r("d2mR"),o=r("SVse"),n=r("s7LF"),s=r("V2nQ"),c=r("riYF"),a=r("PSD3"),b=r.n(a),l=r("8Y7J"),d=r("iInd"),u=r("EApP"),p=r("JqCM"),h=r("lJxs"),m=r("AytR"),g=r("IheW");let f=(()=>{class t{constructor(t){this.http=t}getAllVarients(t=0,e=2,r="",i){const o={page:String(t),pageSize:String(e),search:r,productId:String(i)};return this.http.get(m.a.apiUrl+"/client/varients",{params:o})}deleteVarient(t){return this.http.delete(`${m.a.apiUrl}/client/varients/${t}`)}getVarient(t){return this.http.get(`${m.a.apiUrl}/client/varients/${t}`)}saveVarient(t){return this.http.post(m.a.apiUrl+"/client/varients",t)}updateVarient(t,e){return this.http.put(`${m.a.apiUrl}/client/varients/${t}`,e)}getSpecificationsByVarientId(t){return this.http.get(`${m.a.apiUrl}/client/varients/${t}/specifications`)}saveSpecification(t,e){return this.http.post(`${m.a.apiUrl}/client/varients/${t}/specifications`,e)}getImagesByVarientId(t){return this.http.get(`${m.a.apiUrl}/client/varients/${t}/images`).pipe(Object(h.a)(t=>(t.list.map(t=>(t.url=m.a.apiUrl+t.url,t)),t)))}uploadVarientImage(t,e,r){const i=new FormData;return i.append("file",r),this.http.post(`${m.a.apiUrl}/client/varients/${t}/images/${e}`,i).pipe(Object(h.a)(t=>(t.list.map(t=>(t.url=m.a.apiUrl+t.url,t)),t)))}deleteVarientImage(t,e){return this.http.delete(`${m.a.apiUrl}/client/varients/${t}/images/${e}`).pipe(Object(h.a)(t=>(t.list.map(t=>(t.url=m.a.apiUrl+t.url,t)),t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(g.b))},t.\u0275prov=l.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),v=(()=>{class t{constructor(t){this.http=t}getAllProducts(t=0,e=2,r=""){const i={page:String(t),pageSize:String(e),search:r};return this.http.get(m.a.apiUrl+"/client/products",{params:i})}deleteProduct(t){return this.http.delete(`${m.a.apiUrl}/client/products/${t}`)}getProduct(t){return this.http.get(`${m.a.apiUrl}/client/products/${t}`)}saveProduct(t){return this.http.post(m.a.apiUrl+"/client/products",t)}updateProduct(t,e){return this.http.put(`${m.a.apiUrl}/client/products/${t}`,e)}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(g.b))},t.\u0275prov=l.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function M(t,e){if(1&t&&(l.Nb(0,"li",19),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function N(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,M,2,1,"li",38),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}function w(t,e){1&t&&(l.Nb(0,"li",19),l.uc(1," Price is required "),l.Mb())}function I(t,e){if(1&t&&(l.Nb(0,"li",19),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Price should be minimum ",null==t.formControls.price.errors?null:t.formControls.price.errors.min.min,". ")}}function C(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,w,2,0,"li",38),l.sc(2,I,2,1,"li",38),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.price.errors?null:t.formControls.price.errors.required),l.wb(1),l.bc("ngIf",null==t.formControls.price.errors?null:t.formControls.price.errors.min)}}function S(t,e){1&t&&(l.Nb(0,"li",19),l.uc(1," MRP is required "),l.Mb())}function P(t,e){if(1&t&&(l.Nb(0,"li",19),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" MRP should be minimum ",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.min.min,". ")}}function y(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,S,2,0,"li",38),l.sc(2,P,2,1,"li",38),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.required),l.wb(1),l.bc("ngIf",null==t.formControls.mrp.errors?null:t.formControls.mrp.errors.min)}}function k(t,e){if(1&t&&(l.Nb(0,"li",19),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Color should be maximum ",null==t.formControls.color.errors?null:t.formControls.color.errors.maxlength.requiredLength," characters. ")}}function x(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,k,2,1,"li",38),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.color.errors?null:t.formControls.color.errors.maxlength)}}function V(t,e){if(1&t&&(l.Nb(0,"li",19),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Size should be maximum ",null==t.formControls.size.errors?null:t.formControls.size.errors.maxlength.requiredLength," characters. ")}}function O(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,V,2,1,"li",38),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.size.errors?null:t.formControls.size.errors.maxlength)}}function E(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",49),l.Nb(2,"h6",19),l.uc(3,"No specification added yet "),l.Mb(),l.Mb(),l.Mb())}function U(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",17),l.Nb(2,"label"),l.uc(3,"Title "),l.Nb(4,"span",19),l.uc(5,"*"),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"div",17),l.Nb(7,"label"),l.uc(8,"Specification "),l.Nb(9,"span",19),l.uc(10,"*"),l.Mb(),l.Mb(),l.Mb(),l.Ib(11,"div",50),l.Mb())}const F=function(){return{standalone:!0}};function A(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div",16),l.Nb(1,"div",51),l.Nb(2,"input",52),l.Ub("ngModelChange",function(t){return e.$implicit.name=t}),l.Mb(),l.Mb(),l.Nb(3,"div",53),l.Nb(4,"input",54),l.Ub("ngModelChange",function(t){return e.$implicit.value=t}),l.Mb(),l.Mb(),l.Nb(5,"div",55),l.Nb(6,"i",56),l.Ub("click",function(){l.kc(t);const r=e.index;return l.Wb(2).specifications.splice(r,1)}),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=e.$implicit;l.wb(2),l.bc("ngModel",t.name)("ngModelOptions",l.cc(4,F)),l.wb(2),l.bc("ngModel",t.value)("ngModelOptions",l.cc(5,F))}}function T(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",49),l.Nb(2,"h6",19),l.uc(3,"No image added yet "),l.Mb(),l.Mb(),l.Mb())}function W(t,e){if(1&t&&(l.Nb(0,"div",65),l.Ib(1,"img",66),l.Mb()),2&t){const t=l.Wb().$implicit;l.wb(1),l.bc("src",t.url,l.mc)}}function $(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div",57),l.sc(1,W,2,1,"div",58),l.Nb(2,"span",59),l.Ub("click",function(){return l.kc(t),l.ic(6).click()}),l.Ib(3,"i",60),l.uc(4," Choose file "),l.Nb(5,"input",61,62),l.Ub("change",function(r){l.kc(t);const i=e.$implicit,o=l.ic(6);return l.Wb(2).preview(r,i,o)}),l.Mb(),l.Mb(),l.Nb(7,"span",59),l.Ub("click",function(){l.kc(t);const r=e.$implicit,i=l.ic(6);return l.Wb(2).remove(r,i)}),l.Ib(8,"i",63),l.uc(9," Remove"),l.Mb(),l.Nb(10,"span",59),l.Ub("click",function(){l.kc(t);const r=e.$implicit,i=l.ic(6);return l.Wb(2).upload(r,i)}),l.Ib(11,"i",64),l.uc(12," Upload"),l.Mb(),l.Mb()}if(2&t){const t=e.$implicit;l.wb(1),l.bc("ngIf",t.url&&""!==t.url)}}function z(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div",42),l.Nb(1,"div",7),l.Nb(2,"button",43),l.Ub("click",function(){l.kc(t);const e=l.Wb(2);return e.images.push({id:0,url:e.noImage,fileName:"",format:"",varientId:e.varientId})}),l.Ib(3,"i",44),l.uc(4," New "),l.Mb(),l.Mb(),l.Mb()}}function q(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div",0),l.Nb(1,"div",1),l.Nb(2,"div",2),l.Nb(3,"div",3),l.Nb(4,"h4",4),l.uc(5," Varient form "),l.Ib(6,"i",5),l.uc(7),l.Ib(8,"i",5),l.uc(9),l.Ib(10,"i",5),l.uc(11," Specifications "),l.Mb(),l.Nb(12,"p",6),l.uc(13," Add / Edit Specifications "),l.Mb(),l.Nb(14,"div",39),l.Nb(15,"div",7),l.Nb(16,"button",8),l.Ub("click",function(){return l.kc(t),l.Wb().back()}),l.Ib(17,"i",9),l.uc(18," Back "),l.Mb(),l.Mb(),l.Mb(),l.Nb(19,"form",40),l.Ub("ngSubmit",function(){return l.kc(t),l.Wb().onSpecificationSave()}),l.sc(20,E,4,0,"div",37),l.sc(21,U,12,0,"div",37),l.sc(22,A,7,6,"div",41),l.Nb(23,"div",42),l.Nb(24,"div",7),l.Nb(25,"button",43),l.Ub("click",function(){return l.kc(t),l.Wb().specifications.push({id:0,name:"",value:""})}),l.Ib(26,"i",44),l.uc(27," New "),l.Mb(),l.Mb(),l.Mb(),l.Nb(28,"button",45),l.uc(29,"Save"),l.Mb(),l.Mb(),l.Nb(30,"div",3),l.Nb(31,"h4",4),l.uc(32," Varient form "),l.Ib(33,"i",5),l.uc(34),l.Ib(35,"i",5),l.uc(36),l.Ib(37,"i",5),l.uc(38," Images "),l.Mb(),l.Nb(39,"p",6),l.uc(40," Add / Edit Images "),l.Mb(),l.Nb(41,"div",39),l.Nb(42,"div",7),l.Nb(43,"button",8),l.Ub("click",function(){return l.kc(t),l.Wb().back()}),l.Ib(44,"i",9),l.uc(45," Back "),l.Mb(),l.Mb(),l.Mb(),l.sc(46,T,4,0,"div",37),l.Nb(47,"div",46),l.sc(48,$,13,1,"div",47),l.Mb(),l.sc(49,z,5,0,"div",48),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=l.Wb();l.wb(7),l.wc(" ",null==t.product?null:t.product.categoryName," "),l.wb(2),l.wc(" ",null==t.product?null:t.product.name," "),l.wb(11),l.bc("ngIf",0===t.specifications.length),l.wb(1),l.bc("ngIf",t.specifications.length>0),l.wb(1),l.bc("ngForOf",t.specifications),l.wb(12),l.wc(" ",null==t.product?null:t.product.categoryName," "),l.wb(2),l.wc(" ",null==t.product?null:t.product.name," "),l.wb(10),l.bc("ngIf",0===t.images.length),l.wb(2),l.bc("ngForOf",t.images),l.wb(1),l.bc("ngIf",t.images.length<3)}}const B=function(t){return{"is-invalid":t}};let D=(()=>{class t{constructor(t,e,r,i,o,a,b){var l;this.router=t,this.route=e,this.fb=r,this.toastr=i,this.spinner=o,this.varientService=a,this.productService=b,this.formMode=s.a.Add,this.varientId=0,this.productId=0,this.product=null,this.specifications=[],this.images=[],this.noImage="assets/app/image/no-image.jpg",this.varientForm=this.fb.group({id:[""],name:["",[n.q.maxLength(100)]],price:["0",[n.q.required,n.q.min(0)]],mrp:["0",[n.q.required,n.q.min(0)]],color:["",[n.q.maxLength(20)]],size:["",[n.q.maxLength(20)]],inStock:[!0],productId:["",[n.q.required]]}),this.back=()=>Object(c.a)();const d=null===(l=this.router.getCurrentNavigation())||void 0===l?void 0:l.extras.state;this.formMode=null==d?void 0:d.formMode,this.productId=null==d?void 0:d.productId,this.formMode===s.a.Edit&&(this.varientId=null==d?void 0:d.varientId)}ngOnInit(){this.formMode===s.a.Edit&&(this.getVarient(),this.getSpecificationByVarientId(),this.getImageByVarientId()),this.getProduct()}get formControls(){return this.varientForm.controls}get formModeEnum(){return s.a}getVarient(){this.spinner.show(),this.varientService.getVarient(this.varientId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):this.setFormValueForEdit(t)},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}getProduct(){this.spinner.show(),this.productService.getProduct(this.productId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):(this.product=t,this.varientForm.patchValue({productId:this.product.id}))},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}getSpecificationByVarientId(){this.spinner.show(),this.varientService.getSpecificationsByVarientId(this.varientId).subscribe(t=>{this.spinner.hide(),this.specifications=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}onSubmit(){this.varientForm.valid&&this.saveVarient(this.varientForm.value)}saveVarient(t){this.formMode===s.a.Add&&(this.spinner.show(),this.varientService.saveVarient(t).subscribe(t=>{this.setFormValueForEdit(t),this.formMode=s.a.Edit,this.varientId=t.id,this.productId=t.productId,this.spinner.hide(),this.toastr.success("New Varient saved successfully","Varient Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===s.a.Edit&&(this.spinner.show(),this.varientService.updateVarient(this.varientId,t).subscribe(t=>{this.setFormValueForEdit(t),this.varientId=t.id,this.productId=t.productId,this.spinner.hide(),this.toastr.success("Varient saved successfully","Varient Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}onSpecificationSave(){if(this.specifications.some(t=>0===t.name.trim().length||0===t.value.trim().length))return void b.a.fire("Oops !","Please enter specification, some fields are missing.");const t=this.specifications.map(t=>t);this.saveSpecifications({specifications:t})}saveSpecifications(t){this.spinner.show(),this.varientService.saveSpecification(this.varientId,t).subscribe(t=>{this.specifications=t.list,this.spinner.hide(),this.toastr.success("Specification saved successfully","Specification Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}resetDefaultFormValue(){this.varientForm.reset({name:"",price:"0",mrp:"0",color:"",size:"",inStock:!0,productId:this.productId})}setFormValueForEdit(t){this.varientForm.reset({id:t.id,name:t.name,price:t.price,mrp:t.mrp,color:t.color,size:t.size,inStock:t.inStock,productId:t.productId})}preview(t,e,r){var i;const o=null===(i=null==t?void 0:t.target)||void 0===i?void 0:i.files[0];if(!o.type.includes("image"))return r.value=null,void this.toastr.error("File should be an image","File format!",{positionClass:"toast-bottom-center"});if(o.size>102400)return r.value=null,void this.toastr.error("Image Size should not be more than 100 KB","Image Size!",{positionClass:"toast-bottom-center"});const n=new FileReader;n.onload=()=>{e.url=n.result},n.readAsDataURL(o)}upload(t,e){const r=null==e?void 0:e.files[0];r&&this.uploadVarientImage(t,r)}remove(t,e){0===t.id&&(t.url=this.noImage,e.value=null),t.id>0&&this.deleteVarientImage(t)}getImageByVarientId(){this.spinner.show(),this.varientService.getImagesByVarientId(this.varientId).subscribe(t=>{this.spinner.hide(),this.images=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}uploadVarientImage(t,e){this.spinner.show(),this.varientService.uploadVarientImage(this.varientId,t.id,e).subscribe(t=>{this.spinner.hide(),this.toastr.success("Image uploaded successfuly.","Uploaded!",{positionClass:"toast-bottom-center"}),this.images=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}deleteVarientImage(t){this.spinner.show(),this.varientService.deleteVarientImage(this.varientId,t.id).subscribe(t=>{this.spinner.hide(),this.toastr.success("Image uploaded successfuly.","Uploaded!",{positionClass:"toast-bottom-center"}),this.images=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(d.b),l.Hb(d.a),l.Hb(n.c),l.Hb(u.b),l.Hb(p.c),l.Hb(f),l.Hb(v))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-varient-form"]],decls:65,vars:25,consts:[[1,"row"],[1,"col-md-12","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"ti-angle-double-right","icon-sm","text-info"],[1,"card-description"],[1,"col","text-right"],["type","button",1,"btn","btn-primary","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"ti-arrow-left","btn-icon-prepend"],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],[4,"ngIf"],[1,"form-group","row"],[1,"col"],["for","price"],[1,"text-danger"],["type","number","formControlName","price","id","price","placeholder","Price",1,"form-control","form-control-sm",3,"ngClass"],["for","mrp"],["type","number","formControlName","mrp","id","mrp","placeholder","MRP",1,"form-control","form-control-sm",3,"ngClass"],["for","color"],[1,"input-group"],["type","color","formControlName","color","id","color","placeholder","Color",1,"form-control","form-control-sm",3,"ngClass"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"ti-close"],["for","size"],["type","text","formControlName","size","id","size","placeholder","Size",1,"form-control","form-control-sm",3,"ngClass"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox","formControlName","inStock",1,"form-check-input"],[1,"input-helper"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],["class","row",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"row","mb-3"],[1,"forms-sample",3,"ngSubmit"],["class","form-group row",4,"ngFor","ngForOf"],[1,"row","mb-1"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"fa","fa-plus","fa-lg","mr-1"],["type","submit",1,"btn","btn-primary","mr-2"],[1,"d-flex","flex-wrap","justify-content-start","align-items-end"],["class","m-1 text-center border border-secondary rounded",4,"ngFor","ngForOf"],["class","row mb-1",4,"ngIf"],[1,"col","text-center"],[1,"col-1"],[1,"col","pr-1"],["type","text","required","","placeholder","Title",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col","pl-1","pr-1"],["type","text","required","","placeholder","Specification",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-1","pl-2","d-flex","align-items-center","justify-content-center"],[1,"fa","fa-trash","fa-lg","text-danger",3,"click"],[1,"m-1","text-center","border","border-secondary","rounded"],["class","preview m-1","style","max-width: 300px;",4,"ngIf"],[1,"badge","bg-primary","text-white","cursor-pointer","m-1",3,"click"],[1,"ti-file"],["type","file","accept","image/*","name","file",1,"d-none",3,"change"],["fileInput",""],[1,"ti-trash"],[1,"ti-upload"],[1,"preview","m-1",2,"max-width","300px"],["alt","image1",2,"width","100%","height","auto",3,"src"]],template:function(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",1),l.Nb(2,"div",2),l.Nb(3,"div",3),l.Nb(4,"h4",4),l.uc(5," Varient form "),l.Ib(6,"i",5),l.uc(7),l.Ib(8,"i",5),l.uc(9),l.Mb(),l.Nb(10,"p",6),l.uc(11," Add / Edit Varient "),l.Mb(),l.Nb(12,"div",0),l.Nb(13,"div",7),l.Nb(14,"button",8),l.Ub("click",function(){return e.back()}),l.Ib(15,"i",9),l.uc(16," Back "),l.Mb(),l.Mb(),l.Mb(),l.Nb(17,"form",10),l.Ub("ngSubmit",function(){return e.onSubmit()}),l.Ib(18,"ngx-spinner",11),l.Nb(19,"div",12),l.Nb(20,"label",13),l.uc(21,"Name"),l.Mb(),l.Ib(22,"input",14),l.sc(23,N,2,1,"ul",15),l.Mb(),l.Nb(24,"div",16),l.Nb(25,"div",17),l.Nb(26,"label",18),l.uc(27,"Price "),l.Nb(28,"span",19),l.uc(29,"*"),l.Mb(),l.Mb(),l.Ib(30,"input",20),l.sc(31,C,3,2,"ul",15),l.Mb(),l.Nb(32,"div",17),l.Nb(33,"label",21),l.uc(34,"MRP "),l.Nb(35,"span",19),l.uc(36,"*"),l.Mb(),l.Mb(),l.Ib(37,"input",22),l.sc(38,y,3,2,"ul",15),l.Mb(),l.Mb(),l.Nb(39,"div",16),l.Nb(40,"div",17),l.Nb(41,"label",23),l.uc(42,"Color"),l.Mb(),l.Nb(43,"div",24),l.Ib(44,"input",25),l.Nb(45,"div",26),l.Nb(46,"button",27),l.Ub("click",function(){return e.formControls.color.setValue("")}),l.Ib(47,"i",28),l.Mb(),l.Mb(),l.Mb(),l.sc(48,x,2,1,"ul",15),l.Mb(),l.Nb(49,"div",17),l.Nb(50,"label",29),l.uc(51,"Size"),l.Mb(),l.Ib(52,"input",30),l.sc(53,O,2,1,"ul",15),l.Mb(),l.Mb(),l.Nb(54,"div",12),l.Nb(55,"div",31),l.Nb(56,"label",32),l.Ib(57,"input",33),l.uc(58," In stock ? "),l.Ib(59,"i",34),l.Mb(),l.Mb(),l.Mb(),l.Nb(60,"button",35),l.uc(61,"Save"),l.Mb(),l.Nb(62,"button",36),l.Ub("click",function(){return e.onCancel()}),l.uc(63,"Cancel"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.sc(64,q,50,10,"div",37)),2&t&&(l.wb(7),l.wc(" ",null==e.product?null:e.product.categoryName," "),l.wb(2),l.wc(" ",null==e.product?null:e.product.name," "),l.wb(8),l.bc("formGroup",e.varientForm),l.wb(5),l.bc("ngClass",l.dc(15,B,e.formControls.name.touched&&e.formControls.name.errors)),l.wb(1),l.bc("ngIf",e.formControls.name.touched&&e.formControls.name.errors),l.wb(7),l.bc("ngClass",l.dc(17,B,e.formControls.price.touched&&e.formControls.price.errors)),l.wb(1),l.bc("ngIf",e.formControls.price.touched&&e.formControls.price.errors),l.wb(6),l.bc("ngClass",l.dc(19,B,e.formControls.mrp.touched&&e.formControls.mrp.errors)),l.wb(1),l.bc("ngIf",e.formControls.mrp.touched&&e.formControls.mrp.errors),l.wb(6),l.bc("ngClass",l.dc(21,B,e.formControls.color.touched&&e.formControls.color.errors)),l.wb(4),l.bc("ngIf",e.formControls.color.touched&&e.formControls.color.errors),l.wb(4),l.bc("ngClass",l.dc(23,B,e.formControls.size.touched&&e.formControls.size.errors)),l.wb(1),l.bc("ngIf",e.formControls.size.touched&&e.formControls.size.errors),l.wb(7),l.bc("disabled",!e.varientForm.valid),l.wb(4),l.bc("ngIf",e.formMode==e.formModeEnum.Edit))},directives:[n.s,n.i,n.e,p.a,n.b,n.h,n.d,o.h,o.j,n.m,n.a,n.j,o.i,n.o,n.k],styles:[""]}),t})();var R=r("YCXC"),H=r("TAdN");function L(t,e){1&t&&(l.Nb(0,"li",12),l.uc(1," Name is required "),l.Mb())}function j(t,e){if(1&t&&(l.Nb(0,"li",12),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Name should be maximum ",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength.requiredLength," characters. ")}}function _(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,L,2,0,"li",21),l.sc(2,j,2,1,"li",21),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.required),l.wb(1),l.bc("ngIf",null==t.formControls.name.errors?null:t.formControls.name.errors.maxlength)}}function G(t,e){1&t&&(l.Nb(0,"li",12),l.uc(1," Category is required "),l.Mb())}function J(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,G,2,0,"li",21),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.categoryId.errors?null:t.formControls.categoryId.errors.required)}}function Y(t,e){if(1&t&&(l.Nb(0,"li",12),l.uc(1),l.Mb()),2&t){const t=l.Wb(2);l.wb(1),l.wc(" Description should be maximum ",null==t.formControls.description.errors?null:t.formControls.description.errors.maxlength.requiredLength," characters. ")}}function Q(t,e){if(1&t&&(l.Nb(0,"ul"),l.sc(1,Y,2,1,"li",21),l.Mb()),2&t){const t=l.Wb();l.wb(1),l.bc("ngIf",null==t.formControls.description.errors?null:t.formControls.description.errors.maxlength)}}const K=function(t){return{"is-invalid":t}};let X=(()=>{class t{constructor(t,e,r,i,o,a,b){var l;this.router=t,this.route=e,this.fb=r,this.toastr=i,this.spinner=o,this.productService=a,this.categoryService=b,this.formMode=s.a.Add,this.productId=0,this.productForm=this.fb.group({id:[""],name:["",[n.q.required,n.q.maxLength(50)]],description:["",[n.q.maxLength(500)]],categoryId:["",[n.q.required]]}),this.categories=[],this.back=()=>Object(c.a)();const d=null===(l=this.router.getCurrentNavigation())||void 0===l?void 0:l.extras.state;this.formMode=null==d?void 0:d.formMode,this.formMode===s.a.Edit&&(this.productId=null==d?void 0:d.productId)}ngOnInit(){this.formMode===s.a.Edit&&this.getProduct(),this.getCategories()}get formControls(){return this.productForm.controls}getProduct(){this.spinner.show(),this.productService.getProduct(this.productId).subscribe(t=>{this.spinner.hide(),t.deleted?(this.toastr.error("Something went wrong, Please try again","Error!",{positionClass:"toast-bottom-center"}),this.router.navigate(["../"],{relativeTo:this.route})):this.setFormValueForEdit(t)})}getCategories(){this.spinner.show(),this.categoryService.getCategories().subscribe(t=>{this.categories=t.list,this.spinner.hide()},t=>{this.spinner.hide(),this.toastr.error(t,"Error!",{positionClass:"toast-bottom-center"})})}onSubmit(){this.productForm.valid&&this.saveProduct(this.productForm.value)}saveProduct(t){this.formMode===s.a.Add&&(this.spinner.show(),this.productService.saveProduct(t).subscribe(t=>{this.setFormValueForEdit(t),this.formMode=s.a.Edit,this.productId=t.id,this.spinner.hide(),this.toastr.success("New Product saved successfully","Product Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})),this.formMode===s.a.Edit&&(this.spinner.show(),this.productService.updateProduct(this.productId,t).subscribe(t=>{this.setFormValueForEdit(t),this.spinner.hide(),this.toastr.success("Product saved successfully","Product Saved!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})}))}onCancel(){this.resetDefaultFormValue()}resetDefaultFormValue(){this.productForm.reset({name:"",description:"",categoryId:""})}setFormValueForEdit(t){this.productForm.reset({id:t.id,name:t.name,description:t.description,categoryId:t.categoryId})}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(d.b),l.Hb(d.a),l.Hb(n.c),l.Hb(u.b),l.Hb(p.c),l.Hb(v),l.Hb(R.a))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-product-form"]],decls:36,vars:12,consts:[[1,"row"],[1,"col-md-12","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"card-title","justify-content-between","d-flex"],["type","button",1,"btn","btn-primary","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"ti-arrow-left","btn-icon-prepend"],[1,"card-description"],[1,"forms-sample",3,"formGroup","ngSubmit"],["type","ball-grid-pulse","size","medium"],[1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","name","id","name","placeholder","Name",1,"form-control","form-control-sm",3,"ngClass"],[4,"ngIf"],["for","categoryId"],["formControlName","categoryId","optionValueField","id","optionTextField","name","id","categoryId","placeholder","Please select catrgory...",3,"items"],["for","description"],["formControlName","description","rows","6","id","description","placeholder","Description",1,"form-control","form-control-sm",3,"ngClass"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["type","button",1,"btn","btn-light",3,"click"],["class","text-danger",4,"ngIf"]],template:function(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",1),l.Nb(2,"div",2),l.Nb(3,"div",3),l.Nb(4,"h4",4),l.uc(5," Product form "),l.Nb(6,"button",5),l.Ub("click",function(){return e.back()}),l.Ib(7,"i",6),l.uc(8," Back "),l.Mb(),l.Mb(),l.Nb(9,"p",7),l.uc(10," Add / Edit Product "),l.Mb(),l.Nb(11,"form",8),l.Ub("ngSubmit",function(){return e.onSubmit()}),l.Ib(12,"ngx-spinner",9),l.Nb(13,"div",10),l.Nb(14,"label",11),l.uc(15,"Name "),l.Nb(16,"span",12),l.uc(17,"*"),l.Mb(),l.Mb(),l.Ib(18,"input",13),l.sc(19,_,3,2,"ul",14),l.Mb(),l.Nb(20,"div",10),l.Nb(21,"label",15),l.uc(22,"Category "),l.Nb(23,"span",12),l.uc(24,"*"),l.Mb(),l.Mb(),l.Ib(25,"ngx-select",16),l.sc(26,J,2,1,"ul",14),l.Mb(),l.Nb(27,"div",10),l.Nb(28,"label",17),l.uc(29,"Description"),l.Mb(),l.Ib(30,"textarea",18),l.sc(31,Q,2,1,"ul",14),l.Mb(),l.Nb(32,"button",19),l.uc(33,"Save"),l.Mb(),l.Nb(34,"button",20),l.Ub("click",function(){return e.onCancel()}),l.uc(35,"Cancel"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&t&&(l.wb(11),l.bc("formGroup",e.productForm),l.wb(7),l.bc("ngClass",l.dc(8,K,e.formControls.name.touched&&e.formControls.name.errors)),l.wb(1),l.bc("ngIf",e.formControls.name.touched&&e.formControls.name.errors),l.wb(6),l.bc("items",e.categories),l.wb(1),l.bc("ngIf",e.formControls.categoryId.touched&&e.formControls.categoryId.errors),l.wb(4),l.bc("ngClass",l.dc(10,K,e.formControls.description.touched&&e.formControls.description.errors)),l.wb(1),l.bc("ngIf",e.formControls.description.touched&&e.formControls.description.errors),l.wb(1),l.bc("disabled",!e.productForm.valid))},directives:[n.s,n.i,n.e,p.a,n.b,n.h,n.d,o.h,o.j,H.a],styles:[""]}),t})();var Z=r("hvj1"),tt=r("SmQN");const et=["varientTableEl"];function rt(t,e){if(1&t){const t=l.Ob();l.Nb(0,"tr",26),l.Nb(1,"td",27),l.Nb(2,"h6",28),l.Ub("click",function(){l.kc(t);const r=e.$implicit;return l.Wb().onProductSelected(r)}),l.uc(3,"Name : "),l.Nb(4,"span",29),l.uc(5),l.Mb(),l.Mb(),l.Nb(6,"h6"),l.uc(7,"Category : "),l.Nb(8,"span",29),l.uc(9),l.Mb(),l.Mb(),l.Nb(10,"div"),l.Nb(11,"span",30),l.Ub("click",function(){l.kc(t);const r=e.$implicit;return l.Wb().onProductSelected(r)}),l.Ib(12,"i",31),l.uc(13," View"),l.Mb(),l.Nb(14,"span",32),l.Ib(15,"i",33),l.Mb(),l.Ib(16,"swal",34,35),l.Nb(18,"span",36),l.Ub("click",function(){l.kc(t);const r=e.$implicit,i=e.index;return l.Wb().onProductEdit(r,i)}),l.Ib(19,"i",37),l.uc(20," Edit"),l.Mb(),l.Nb(21,"span",38),l.Ub("confirm",function(){l.kc(t);const r=e.$implicit;return l.Wb().onDelete(r)}),l.Ib(22,"i",39),l.uc(23," Delete"),l.Mb(),l.Ib(24,"swal",40,41),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=e.$implicit,r=l.ic(17),i=l.ic(25),o=l.Wb();l.bc("ngClass",t.id===(null==o.selectedProduct?null:o.selectedProduct.id)?"table-warning":""),l.wb(5),l.vc(t.name),l.wb(4),l.vc(t.categoryName),l.wb(5),l.bc("swal",r),l.wb(2),l.bc("text",t.description),l.wb(5),l.bc("swal",i),l.wb(3),l.bc("showCancelButton",!0)("focusCancel",!0)}}function it(t,e){1&t&&(l.Nb(0,"tr"),l.Nb(1,"td",42),l.uc(2," No records available "),l.Mb(),l.Mb())}function ot(t,e){1&t&&l.Ib(0,"i",52)}function nt(t,e){if(1&t&&(l.Nb(0,"span"),l.uc(1," \u2022 Size : "),l.Nb(2,"span",29),l.uc(3),l.Mb(),l.Mb()),2&t){const t=l.Wb().$implicit;l.wb(3),l.vc(t.size)}}function st(t,e){if(1&t&&(l.Nb(0,"h6"),l.uc(1,"Color : \xa0"),l.Ib(2,"div",53),l.Mb()),2&t){const t=l.Wb().$implicit;l.wb(2),l.qc("background-color",t.color)}}function ct(t,e){1&t&&(l.Nb(0,"div",42),l.Nb(1,"h6",56),l.uc(2,"No image added yet "),l.Mb(),l.Mb())}function at(t,e){if(1&t&&l.Ib(0,"li",67),2&t){const t=e.index;l.bc("ngClass",!0===e.first?"active":""),l.xb("data-slide-to",t)}}function bt(t,e){if(1&t&&(l.Nb(0,"div",68),l.Ib(1,"img",69),l.Mb()),2&t){const t=e.$implicit;l.bc("ngClass",!0===e.first?"active":""),l.wb(1),l.bc("src",t.url,l.mc)}}function lt(t,e){if(1&t&&(l.Nb(0,"div",57),l.Nb(1,"ol",58),l.sc(2,at,1,2,"li",59),l.Mb(),l.Nb(3,"div",60),l.sc(4,bt,2,2,"div",61),l.Mb(),l.Nb(5,"button",62),l.Ib(6,"span",63),l.Nb(7,"span",64),l.uc(8,"Previous"),l.Mb(),l.Mb(),l.Nb(9,"button",65),l.Ib(10,"span",66),l.Nb(11,"span",64),l.uc(12,"Next"),l.Mb(),l.Mb(),l.Mb()),2&t){const t=l.Wb(4);l.wb(2),l.bc("ngForOf",t.images),l.wb(2),l.bc("ngForOf",t.images)}}function dt(t,e){if(1&t&&(l.Nb(0,"div"),l.sc(1,ct,3,0,"div",54),l.sc(2,lt,13,2,"div",55),l.Mb()),2&t){const t=l.Wb(3);l.wb(1),l.bc("ngIf",0===t.images.length),l.wb(1),l.bc("ngIf",t.images&&t.images.length)}}function ut(t,e){if(1&t){const t=l.Ob();l.Nb(0,"tr"),l.Nb(1,"td",27),l.Nb(2,"h6"),l.uc(3,"Name : "),l.Nb(4,"span",29),l.uc(5),l.Mb(),l.Mb(),l.Nb(6,"h6"),l.uc(7,"MRP : "),l.Nb(8,"span",29),l.uc(9),l.Mb(),l.uc(10," \u2022 Price : "),l.Nb(11,"span",29),l.uc(12),l.Mb(),l.Mb(),l.Nb(13,"h6"),l.sc(14,ot,1,0,"i",46),l.uc(15," In stock : "),l.Nb(16,"span",26),l.uc(17),l.Mb(),l.sc(18,nt,4,1,"span",23),l.Mb(),l.sc(19,st,3,2,"h6",23),l.Nb(20,"div"),l.Nb(21,"span",47),l.Ub("click",function(){l.kc(t);const r=e.$implicit;return l.Wb(2).onVarientImage(r)}),l.Ib(22,"i",48),l.uc(23," Image"),l.Mb(),l.Nb(24,"swal",49,50),l.Ub("confirm",function(){l.kc(t);const r=e.$implicit,i=e.index;return l.Wb(2).onVarientEdit(r,i)}),l.sc(26,dt,3,2,"div",51),l.Mb(),l.Nb(27,"span",36),l.Ub("click",function(){l.kc(t);const r=e.$implicit,i=e.index;return l.Wb(2).onVarientEdit(r,i)}),l.Ib(28,"i",37),l.uc(29," Edit"),l.Mb(),l.Nb(30,"span",38),l.Ub("confirm",function(){l.kc(t);const r=e.$implicit;return l.Wb(2).onVarientDelete(r)}),l.Ib(31,"i",39),l.uc(32," Delete"),l.Mb(),l.Ib(33,"swal",40,41),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=e.$implicit,r=l.ic(25),i=l.ic(34),o=l.Wb(2);l.wb(5),l.vc(t.name),l.wb(4),l.vc(t.mrp),l.wb(3),l.vc(t.price),l.wb(2),l.bc("ngIf",!t.inStock),l.wb(2),l.bc("ngClass",t.inStock?"text-primary":"text-danger"),l.wb(1),l.vc(t.inStock?"Yes":"No"),l.wb(1),l.bc("ngIf",t.size),l.wb(1),l.bc("ngIf",t.color),l.wb(2),l.bc("swal",r),l.wb(3),l.bc("showCancelButton",!0)("focusCancel",!0)("cancelButtonText","Close")("confirmButtonText","Update"),l.wb(2),l.bc("swalPortal",o.swalTargets.content),l.wb(4),l.bc("swal",i),l.wb(3),l.bc("showCancelButton",!0)("focusCancel",!0)}}function pt(t,e){1&t&&(l.Nb(0,"tr"),l.Nb(1,"td",42),l.uc(2," No records available "),l.Mb(),l.Mb())}function ht(t,e){if(1&t){const t=l.Ob();l.Nb(0,"div",2),l.Nb(1,"div",3,43),l.Nb(3,"div",4),l.Nb(4,"div",0),l.Nb(5,"div",5),l.Nb(6,"h4",6),l.uc(7),l.Ib(8,"i",44),l.uc(9),l.Mb(),l.Nb(10,"p",7),l.uc(11," List of varients "),l.Mb(),l.Mb(),l.Nb(12,"div",8),l.Nb(13,"div",9),l.Nb(14,"input",10),l.Ub("ngModelChange",function(e){return l.kc(t),l.Wb().varientSearch=e}),l.Mb(),l.Nb(15,"div",11),l.Nb(16,"button",12),l.Ub("click",function(){return l.kc(t),l.Wb().onVarientClear()}),l.Ib(17,"i",13),l.Mb(),l.Nb(18,"button",12),l.Ub("click",function(){return l.kc(t),l.Wb().onVarientSearchClick()}),l.Ib(19,"i",14),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(20,"div",0),l.Nb(21,"div",15),l.Nb(22,"button",16),l.Ub("click",function(){return l.kc(t),l.Wb().onVarientAdd()}),l.Ib(23,"i",17),l.uc(24," Add "),l.Mb(),l.Nb(25,"button",18),l.Ub("click",function(){return l.kc(t),l.Wb().onVarientRefresh()}),l.Ib(26,"i",19),l.uc(27," Refresh "),l.Mb(),l.Mb(),l.Mb(),l.Nb(28,"div",20),l.Nb(29,"table",21),l.Nb(30,"thead"),l.Nb(31,"tr"),l.Nb(32,"th"),l.uc(33,"Varient Details"),l.Mb(),l.Mb(),l.Mb(),l.Nb(34,"tbody"),l.sc(35,ut,35,17,"tr",45),l.sc(36,pt,3,0,"tr",23),l.Mb(),l.Nb(37,"tfoot"),l.Nb(38,"td"),l.Nb(39,"app-rb-paginator",24),l.Ub("pageChange",function(e){return l.kc(t),l.Wb().onVarientPageChange(e)}),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&t){const t=l.Wb();l.wb(7),l.wc(" ",null==t.selectedProduct?null:t.selectedProduct.categoryName," "),l.wb(2),l.wc(" ",null==t.selectedProduct?null:t.selectedProduct.name," "),l.wb(5),l.bc("ngModel",t.varientSearch),l.wb(21),l.bc("ngForOf",t.varients),l.wb(1),l.bc("ngIf",!t.varients.length),l.wb(3),l.bc("paginationOptions",t.varientPageOpts)}}let mt=(()=>{class t{constructor(t,e,r,i,o,n,s){this.productService=t,this.toastr=e,this.spinner=r,this.router=i,this.route=o,this.varientService=n,this.swalTargets=s,this.products=[],this.productSearch="",this.productPageOpts={pageSize:5,page:0,pageTotal:0,total:1},this.selectedProduct=null,this.varients=[],this.varientSearch="",this.varientPageOpts={pageSize:5,page:0,pageTotal:0,total:1},this.images=[],this.PRODUCT_LIST_PAGE_STATE="PRODUCT_LIST_PAGE_STATE",this.restorePageState(),this.clearPageState()}ngOnInit(){this.getAllProducts(),null!==this.selectedProduct&&this.getAllVarients()}getAllProducts(){this.spinner.show(),this.productService.getAllProducts(this.productPageOpts.page,this.productPageOpts.pageSize,this.productSearch.trim()).subscribe(t=>{this.products=t.list,this.productPageOpts.page=t.page,this.productPageOpts.pageSize=t.pageSize,this.productPageOpts.pageTotal=t.pageTotal,this.productPageOpts.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onProductPageChange(t){this.getAllProducts()}onProductSearchClick(){0!==this.productSearch.trim().length?(this.productPageOpts.page=0,this.getAllProducts()):this.productSearch=""}onProductClear(){0!==this.productSearch.trim().length?(this.productSearch="",this.productPageOpts.page=0,this.getAllProducts()):this.productSearch=""}onProductRefresh(){this.productSearch="",this.productPageOpts.page=0,this.getAllProducts()}onDelete(t){this.spinner.show(),this.productService.deleteProduct(t.id).subscribe(t=>{this.products=this.products.filter(e=>e.id!==t.id),this.spinner.hide(),this.toastr.success("Product removed successfully","Product Removed!",{positionClass:"toast-bottom-center"})},t=>{this.spinner.hide(),this.toastr.error(t,"Failed!",{positionClass:"toast-bottom-center"})})}onProductAdd(){this.storePageState(),this.router.navigate(["../product-form"],{relativeTo:this.route,state:{formMode:s.a.Add}})}onProductEdit(t,e){this.storePageState(),this.router.navigate(["../product-form"],{relativeTo:this.route,state:{formMode:s.a.Edit,productId:t.id}})}onProductSelected(t){null===this.selectedProduct||this.selectedProduct.id!==t.id?(this.selectedProduct=t,this.varientSearch="",this.getAllVarients(),setTimeout(()=>{Object(c.b)()&&this.varientTableEl.nativeElement.scrollIntoView({behavior:"smooth"})},100)):this.selectedProduct=null}getAllVarients(){var t;this.spinner.show(),this.varientService.getAllVarients(this.varientPageOpts.page,this.varientPageOpts.pageSize,this.varientSearch.trim(),Number(null===(t=this.selectedProduct)||void 0===t?void 0:t.id)).subscribe(t=>{this.varients=t.list,this.varientPageOpts.page=t.page,this.varientPageOpts.pageSize=t.pageSize,this.varientPageOpts.pageTotal=t.pageTotal,this.varientPageOpts.total=t.total,this.spinner.hide()},t=>{this.spinner.hide()})}onVarientPageChange(t){this.getAllVarients()}onVarientSearchClick(){0!==this.varientSearch.trim().length?(this.varientPageOpts.page=0,this.getAllVarients()):this.varientSearch=""}onVarientClear(){0!==this.varientSearch.trim().length?(this.varientSearch="",this.varientPageOpts.page=0,this.getAllVarients()):this.varientSearch=""}onVarientRefresh(){this.varientSearch="",this.varientPageOpts.page=0,this.getAllVarients()}onVarientDelete(t){this.spinner.show(),this.varientService.deleteVarient(t.id).subscribe(t=>{this.varients=this.varients.filter(e=>e.id!==t.id),this.spinner.hide(),this.toastr.success("Varient removed successfully","Varient Removed!",{positionClass:"toast-bottom-center"})})}onVarientAdd(){var t;this.storePageState(),this.router.navigate(["../varient-form"],{relativeTo:this.route,state:{formMode:s.a.Add,productId:null===(t=this.selectedProduct)||void 0===t?void 0:t.id}})}onVarientEdit(t,e){var r;this.storePageState(),this.router.navigate(["../varient-form"],{relativeTo:this.route,state:{formMode:s.a.Edit,productId:null===(r=this.selectedProduct)||void 0===r?void 0:r.id,varientId:t.id}})}onVarientImage(t){this.getImageByVarientId(t.id)}getImageByVarientId(t){this.spinner.show(),this.varientService.getImagesByVarientId(t).subscribe(t=>{this.spinner.hide(),this.images=t.list},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error!",{positionClass:"toast-bottom-center"})})}storePageState(){const t=JSON.stringify({productSearch:this.productSearch,productPageOpts:this.productPageOpts,selectedProduct:this.selectedProduct,varientSearch:this.varientSearch,varientPageOpts:this.varientPageOpts});localStorage.setItem(this.PRODUCT_LIST_PAGE_STATE,t)}restorePageState(){const t=localStorage.getItem(this.PRODUCT_LIST_PAGE_STATE);if(null!=t){const e=JSON.parse(t);this.productSearch=e.productSearch,this.productPageOpts=e.productPageOpts,this.selectedProduct=e.selectedProduct,this.varientSearch=e.varientSearch,this.varientPageOpts=e.varientPageOpts}}clearPageState(){localStorage.removeItem(this.PRODUCT_LIST_PAGE_STATE)}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(v),l.Hb(u.b),l.Hb(p.c),l.Hb(d.b),l.Hb(d.a),l.Hb(f),l.Hb(Z.d))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-product-list"]],viewQuery:function(t,e){if(1&t&&l.yc(et,!0),2&t){let t;l.hc(t=l.Vb())&&(e.varientTableEl=t.first)}},decls:40,vars:5,consts:[[1,"row"],["type","ball-grid-pulse","size","medium"],[1,"col-lg-6","grid-margin","transparent"],[1,"card"],[1,"card-body"],[1,"col-lg"],[1,"card-title"],[1,"card-description"],[1,"form-group","col-lg"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"ti-close"],[1,"ti-search"],[1,"col","text-right"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text","mr-1",3,"click"],[1,"ti-plus","btn-icon-prepend"],["type","button",1,"btn","btn-success","btn-rounded","btn-sm","btn-icon-text",3,"click"],[1,"fa","fa-refresh","btn-icon-prepend"],[1,"table-responsive"],[1,"table","table-hover"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"paginationOptions","pageChange"],["class","col-lg-6 grid-margin transparent",4,"ngIf"],[3,"ngClass"],[1,"d-flex","flex-column"],[1,"cursor-pointer","font-weight-bold",3,"click"],[1,"text-primary"],[1,"badge","bg-primary","text-white","cursor-pointer","mr-1",3,"click"],[1,"fa","fa-bars"],[1,"badge","bg-primary","text-white","cursor-pointer","mr-1",3,"swal"],[1,"ti-info"],["title","Product Description","padding","1em 0",3,"text"],["descSwal",""],[1,"badge","bg-info","text-white","cursor-pointer","mr-1",3,"click"],[1,"ti-pencil"],[1,"badge","bg-danger","text-white","cursor-pointer",3,"swal","confirm"],[1,"ti-trash"],["title","Are you sure?","text","This cannot be undone","icon","question","padding","1em 0",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"text-center"],["varientTableEl",""],[1,"ti-angle-double-right","icon-sm","text-info"],[4,"ngFor","ngForOf"],["class","fa fa-exclamation-triangle text-warning fa-lg",4,"ngIf"],[1,"badge","bg-primary","text-white","cursor-pointer","mr-1",3,"swal","click"],[1,"ti-image"],["title","Product Images",3,"showCancelButton","focusCancel","cancelButtonText","confirmButtonText","confirm"],["varientImageSwal",""],[4,"swalPortal"],[1,"fa","fa-exclamation-triangle","text-warning","fa-lg"],[1,"d-inline","px-5","border","border-dark","rounded-pill"],["class","text-center",4,"ngIf"],["id","carouselExampleIndicators","class","carousel slide","data-ride","carousel",4,"ngIf"],[1,"text-danger"],["id","carouselExampleIndicators","data-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["data-target","#carouselExampleIndicators",3,"ngClass",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-target","#carouselExampleIndicators","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["type","button","data-target","#carouselExampleIndicators","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["data-target","#carouselExampleIndicators",3,"ngClass"],[1,"carousel-item",3,"ngClass"],["alt","image1",1,"d-block","w-100",3,"src"]],template:function(t,e){1&t&&(l.Nb(0,"div",0),l.Ib(1,"ngx-spinner",1),l.Nb(2,"div",2),l.Nb(3,"div",3),l.Nb(4,"div",4),l.Nb(5,"div",0),l.Nb(6,"div",5),l.Nb(7,"h4",6),l.uc(8,"Products"),l.Mb(),l.Nb(9,"p",7),l.uc(10," List of products "),l.Mb(),l.Mb(),l.Nb(11,"div",8),l.Nb(12,"div",9),l.Nb(13,"input",10),l.Ub("ngModelChange",function(t){return e.productSearch=t}),l.Mb(),l.Nb(14,"div",11),l.Nb(15,"button",12),l.Ub("click",function(){return e.onProductClear()}),l.Ib(16,"i",13),l.Mb(),l.Nb(17,"button",12),l.Ub("click",function(){return e.onProductSearchClick()}),l.Ib(18,"i",14),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(19,"div",0),l.Nb(20,"div",15),l.Nb(21,"button",16),l.Ub("click",function(){return e.onProductAdd()}),l.Ib(22,"i",17),l.uc(23," Add "),l.Mb(),l.Nb(24,"button",18),l.Ub("click",function(){return e.onProductRefresh()}),l.Ib(25,"i",19),l.uc(26," Refresh "),l.Mb(),l.Mb(),l.Mb(),l.Nb(27,"div",20),l.Nb(28,"table",21),l.Nb(29,"thead"),l.Nb(30,"tr"),l.Nb(31,"th"),l.uc(32,"Product Details"),l.Mb(),l.Mb(),l.Mb(),l.Nb(33,"tbody"),l.sc(34,rt,26,8,"tr",22),l.sc(35,it,3,0,"tr",23),l.Mb(),l.Nb(36,"tfoot"),l.Nb(37,"td"),l.Nb(38,"app-rb-paginator",24),l.Ub("pageChange",function(t){return e.onProductPageChange(t)}),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.sc(39,ht,40,6,"div",25),l.Mb()),2&t&&(l.wb(13),l.bc("ngModel",e.productSearch),l.wb(21),l.bc("ngForOf",e.products),l.wb(1),l.bc("ngIf",!e.products.length),l.wb(3),l.bc("paginationOptions",e.productPageOpts),l.wb(1),l.bc("ngIf",null!==e.selectedProduct))},directives:[p.a,n.b,n.h,n.k,o.i,o.j,tt.a,o.h,Z.b,Z.a,Z.c],styles:[".carousel-control-next[_ngcontent-%COMP%], .carousel-control-prev[_ngcontent-%COMP%]{background-color:initial;border-color:transparent}"]}),t})(),gt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-product"]],decls:8,vars:0,consts:[[1,"content-wrapper"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"col-12","col-xl-8","mb-4","mb-xl-0"],[1,"font-weight-bold"]],template:function(t,e){1&t&&(l.Nb(0,"div",0),l.Nb(1,"div",1),l.Nb(2,"div",2),l.Nb(3,"div",1),l.Nb(4,"div",3),l.Nb(5,"h3",4),l.uc(6,"Product"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Ib(7,"router-outlet"),l.Mb())},directives:[d.f],styles:[""]}),t})();var ft=r("SqGc"),vt=r("PzTl");const Mt=[{path:"",component:gt,children:[{path:"",redirectTo:"product-list",pathMatch:"full"},{path:"product-list",component:mt,canActivate:[ft.a],data:{roles:[vt.a.Admin,vt.a.Staff]}},{path:"product-form",component:X,canActivate:[ft.a],data:{roles:[vt.a.Admin,vt.a.Staff]}},{path:"varient-form",component:D,canActivate:[ft.a],data:{roles:[vt.a.Admin,vt.a.Staff]}}]}];let Nt=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[d.e.forChild(Mt)],d.e]}),t})(),wt=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[o.b,Nt,i.a]]}),t})()}}]);